(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{gofw:function(t,e,i){"use strict";i.r(e);var c=i("ofXK"),s=i("tyNb"),n=i("bFKe"),o=i("PCNd"),a=i("0Y/I"),r=i("jRrs"),l=i("XNiG"),b=i("quSY"),p=i("1G5W"),u=i("ph7v"),h=i("fXoL"),d=i("lR5k");function f(t,e){1&t&&h.Tb(0)}function m(t,e){if(1&t){const t=h.Yb();h.Xb(0,"span",17),h.fc("click",(function(){h.Cc(t);const e=h.jc(2).index;return h.jc(2).isFullVisibleMap.set(e,!1)})),h.Nc(1,"show less"),h.Wb()}}function g(t,e){if(1&t){const t=h.Yb();h.Xb(0,"span",17),h.fc("click",(function(){h.Cc(t);const e=h.jc(2).index;return h.jc(2).isFullVisibleMap.set(e,!0)})),h.Nc(1,"show more"),h.Wb()}}const N=function(t){return{index:t}};function w(t,e){if(1&t&&(h.Vb(0),h.Lc(1,f,1,0,"ng-container",15),h.Lc(2,m,2,0,"span",16),h.Lc(3,g,2,0,"span",16),h.Ub()),2&t){const t=h.jc().index,e=h.jc(2),i=h.yc(6),c=h.yc(4);h.Db(1),h.pc("ngTemplateOutlet",e.isFullVisibleMap.get(t)?i:c)("ngTemplateOutletContext",h.uc(4,N,t)),h.Db(1),h.pc("ngIf",e.isFullVisibleMap.get(t)),h.Db(1),h.pc("ngIf",!e.isFullVisibleMap.get(t))}}function j(t,e){if(1&t&&(h.Vb(0),h.Sb(1,"markdown",18),h.Ub()),2&t){const t=h.jc().$implicit;h.Db(1),h.pc("data",t.description)}}function v(t,e){if(1&t&&(h.Xb(0,"div",7),h.Xb(1,"div",8),h.Xb(2,"div",9),h.Nc(3),h.kc(4,"date"),h.Wb(),h.Xb(5,"div",10),h.Sb(6,"i",11),h.Wb(),h.Xb(7,"div",12),h.Xb(8,"h4",13),h.Nc(9),h.Wb(),h.Lc(10,w,4,6,"ng-container",14),h.Lc(11,j,2,1,"ng-container",14),h.Wb(),h.Wb(),h.Wb()),2&t){const t=e.$implicit,i=h.jc(2);h.Db(3),h.Pc(" ",h.mc(4,4,t.addedAt,"LLL dd, yyyy")," "),h.Db(6),h.Oc(t.title),h.Db(1),h.pc("ngIf",t.description.length>i.substringLength),h.Db(1),h.pc("ngIf",t.description.length<=i.substringLength)}}function D(t,e){if(1&t&&(h.Xb(0,"perfect-scrollbar",4),h.Xb(1,"div",5),h.Lc(2,v,12,7,"div",6),h.Wb(),h.Wb()),2&t){const t=h.jc();h.Db(2),h.pc("ngForOf",t.patchNotes)}}function y(t,e){if(1&t&&(h.Xb(0,"div",19),h.Xb(1,"div",20),h.Xb(2,"div",21),h.Xb(3,"div"),h.Nc(4,"Project "),h.Xb(5,"span",22),h.Nc(6),h.Wb(),h.Nc(7," does not contain any patch notes"),h.Wb(),h.Wb(),h.Wb(),h.Wb()),2&t){const t=h.jc();h.Db(6),h.Oc(t.project.name)}}function M(t,e){if(1&t&&h.Sb(0,"markdown",18),2&t){const t=e.index,i=h.jc();h.pc("data",i.shortDescriptionMap.get(t)+"...")}}function L(t,e){if(1&t&&h.Sb(0,"markdown",18),2&t){const t=e.index,i=h.jc();h.pc("data",i.fullDescriptionMap.get(t))}}let P=(()=>{class t{constructor(t,e,i){this.route=t,this.cdr=e,this.queryService=i,this.destroy$=new l.a,this.fullDescriptionMap=new Map,this.shortDescriptionMap=new Map,this.isFullVisibleMap=new Map,this.substringLength=220,this.route.data.pipe(Object(p.a)(this.destroy$)).subscribe(t=>{this.initialize(t.activeProject.project)})}initialize(t){this.project!==t&&(this.project=t,this.getPatchNotes(this.project.id))}ngOnDestroy(){this.subPatchNotes instanceof b.a&&this.subPatchNotes.unsubscribe(),this.destroy$.next(),this.destroy$.complete()}updatePatchNotes(t){this.patchNotes=t,this.patchNotes.sort((t,e)=>{const i=new Date(t.addedAt).getTime(),c=new Date(e.addedAt).getTime();return i>c?-1:i<c?1:0}),this.patchNotes.forEach((t,e)=>{this.fullDescriptionMap.set(e,t.description),this.shortDescriptionMap.set(e,t.description.substring(0,this.substringLength)),this.isFullVisibleMap.set(e,!1)}),setTimeout(()=>this.cdr.detectChanges())}getPatchNotes(t){this.subPatchNotes instanceof b.a&&this.subPatchNotes.unsubscribe(),this.subPatchNotes=this.queryService.getPatchNotes(t).pipe(Object(p.a)(this.destroy$)).subscribe(t=>this.updatePatchNotes(t.items))}}return t.\u0275fac=function(e){return new(e||t)(h.Rb(s.a),h.Rb(h.h),h.Rb(u.a))},t.\u0275cmp=h.Lb({type:t,selectors:[["m-patch-notes-overview"]],decls:7,vars:2,consts:[["class","m-scrollable m-scroller",4,"ngIf","ngIfElse"],["noProjectPatchNotes",""],["shortDescription",""],["fullDescription",""],[1,"m-scrollable","m-scroller"],[1,"m-timeline-2",2,"font-size","10px"],["class","m-timeline-2__items",4,"ngFor","ngForOf"],[1,"m-timeline-2__items"],[1,"m-timeline-2__item"],[1,"m-timeline-2__item-time","f-s-14","f-w-400","basic-font","pt-075"],[1,"m-timeline-2__item-cricle"],[1,"la","la-genderless","c-main"],[1,"m-timeline-2__item-text","basic-font"],[1,"f-w-700","f-s-16"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","m-link clickable",3,"click",4,"ngIf"],[1,"m-link","clickable",3,"click"],[3,"data"],[1,"row","first-row"],[1,"col-sm-12"],[1,"card","card-body","m-card-warning","f-s-14","f-w-400"],[1,"bold"]],template:function(t,e){if(1&t&&(h.Lc(0,D,3,1,"perfect-scrollbar",0),h.Lc(1,y,8,1,"ng-template",null,1,h.Mc),h.Lc(3,M,1,1,"ng-template",null,2,h.Mc),h.Lc(5,L,1,1,"ng-template",null,3,h.Mc)),2&t){const t=h.yc(2);h.pc("ngIf",(null==e.patchNotes?null:e.patchNotes.length)>0)("ngIfElse",t)}},directives:[c.m,n.b,c.l,c.r,d.a],pipes:[c.e],encapsulation:2,changeDetection:0}),t})();var X=i("NFeN");i.d(e,"PatchNotesModule",(function(){return W}));let W=(()=>{class t{}return t.\u0275mod=h.Pb({type:t}),t.\u0275inj=h.Ob({factory:function(e){return new(e||t)},providers:[],imports:[[c.c,n.c,o.a,a.a,d.b.forChild(),s.i.forChild([{path:"**",component:P,resolve:{activeProject:r.a}}]),X.b]]}),t})()}}]);