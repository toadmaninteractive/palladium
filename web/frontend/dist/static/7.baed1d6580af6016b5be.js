(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{PEhK:function(e,t,a){"use strict";a.r(t);var i=a("ofXK"),n=a("3Pt+"),c=a("bTqV"),o=a("bSwM"),s=a("f0Cb"),l=a("NFeN"),r=a("qFsG"),b=a("STbY"),d=a("M9IT"),m=a("Dh3D"),u=a("+0xr"),p=a("Qu3c"),h=a("bFKe"),f=(a("mrSG"),a("fXoL")),g=a("XNiG"),v=a("1G5W");const D=new f.r("@sweetalert2/ngx-sweetalert2#swalLibraryToken"),y=new f.r("@sweetalert2/ngx-sweetalert2#dismissOnDestroy");let X=(()=>{class e{constructor(e){this.swalProvider=e}get swal(){return this.swalPromiseCache||this.preloadSweetAlertLibrary(),this.swalPromiseCache}preloadSweetAlertLibrary(){if(this.swalPromiseCache)return;const e="function"==typeof(t=this.swalProvider)&&void 0===t.version?this.swalProvider():Promise.resolve(this.swalProvider);var t;this.swalPromiseCache=e.then(e=>function(e){return"function"==typeof e}(e)?e:e.default)}}return e.\u0275fac=function(t){return new(t||e)(f.bc(D))},e.\u0275prov=f.Nb({token:e,factory:e.\u0275fac}),e})();function W(){return a.e(15).then(a.t.bind(null,"PSD3",7))}let $=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[X,{provide:D,useValue:t.provideSwal||W},{provide:y,useValue:t.dismissOnDestroy||!0}]}}static forChild(t={}){return{ngModule:e,providers:[...t.provideSwal?[X,{provide:D,useValue:t.provideSwal}]:[],...void 0!==t.dismissOnDestroy?[{provide:y,useValue:t.dismissOnDestroy}]:[]]}}}return e.\u0275mod=f.Pb({type:e}),e.\u0275inj=f.Ob({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})();var C=a("PCNd"),w=a("j1ZV"),S=a("tyNb"),k=a("2Vo4"),_=a("itXk"),j=a("quSY"),R=a("/uUt"),N=a("Kj3r"),L=a("lJxs"),O=a("pLZG"),x=a("vkgz"),P=a("nYR2"),I=a("mi6w"),A=a("aMtd"),T=a("Y40W"),M=a("kmnG"),U=a("kScs"),z=a("jhN1");let G=(()=>{class e{constructor(e){this.sanitizer=e,this.defaultSet="identicon",this.size=32,this.radius=4}gravatarUrl(e,t){const a=U.Md5.hashAsciiStr(e.toLowerCase().trim());return this.sanitizer.bypassSecurityTrustUrl(`https://www.gravatar.com/avatar/${a}?s=${t}&d=${this.defaultSet}`)}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(z.b))},e.\u0275cmp=f.Lb({type:e,selectors:[["m-gravatar"]],inputs:{email:"email",defaultSet:"defaultSet",size:"size",radius:"radius"},decls:1,vars:7,consts:[[3,"src"]],template:function(e,t){1&e&&f.Sb(0,"img",0),2&e&&(f.Kc("width",t.size,"px")("height",t.size,"px")("border-radius",t.radius,"px"),f.pc("src",t.gravatarUrl(t.email,t.size),f.Ec))},encapsulation:2,changeDetection:0}),e})();function H(e,t){1&e&&(f.Xb(0,"th",29),f.Nc(1," ID "),f.Wb())}function V(e,t){if(1&e&&(f.Xb(0,"td",30),f.Xb(1,"span",31),f.Nc(2),f.Wb(),f.Wb()),2&e){const e=t.$implicit;f.Hb("deleted",e.isDeleted),f.Db(2),f.Pc(" ",e.id," ")}}function B(e,t){1&e&&(f.Xb(0,"th",32),f.Nc(1," Username "),f.Wb())}function F(e,t){1&e&&(f.Xb(0,"mat-icon",45),f.Nc(1," star "),f.Wb()),2&e&&f.pc("inline",!0)}const J=function(e){return{dimmed:e}};function Y(e,t){if(1&e&&(f.Xb(0,"td",33),f.Xb(1,"div",34),f.Xb(2,"div",35),f.Xb(3,"div",36),f.Xb(4,"span",37),f.Sb(5,"m-gravatar",38),f.Wb(),f.Xb(6,"div",39),f.Xb(7,"span",40),f.Xb(8,"a",41),f.Xb(9,"strong"),f.Nc(10),f.Wb(),f.Wb(),f.Lc(11,F,2,1,"mat-icon",42),f.Wb(),f.Sb(12,"br"),f.Xb(13,"span",43),f.Xb(14,"small",44),f.Nc(15),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=t.$implicit,a=f.jc();f.Db(3),f.pc("ngClass",a.personnelAccountBadgeClass(e)),f.Db(2),f.pc("email",e.username)("size",32)("radius",4),f.Db(3),f.pc("routerLink",e.username),f.Db(2),f.Oc(e.username),f.Db(1),f.pc("ngIf",e.isSuperadmin),f.Db(3),f.pc("ngClass",f.uc(9,J,!e.name)),f.Db(1),f.Pc(" ",e.name||"Name not set"," ")}}function q(e,t){1&e&&(f.Xb(0,"th",46),f.Nc(1," Blocked "),f.Wb())}function E(e,t){if(1&e&&(f.Xb(0,"td",33),f.Nc(1),f.Wb()),2&e){const e=t.$implicit;f.Db(1),f.Pc(" ",e.isBlocked?"Yes":"No"," ")}}function K(e,t){1&e&&(f.Xb(0,"th",46),f.Nc(1," Deleted "),f.Wb())}function Z(e,t){if(1&e&&(f.Xb(0,"td",33),f.Nc(1),f.Wb()),2&e){const e=t.$implicit;f.Db(1),f.Pc(" ",e.isDeleted?"Yes":"No"," ")}}function Q(e,t){1&e&&(f.Xb(0,"th",47),f.Nc(1," Date Added "),f.Wb())}function ee(e,t){if(1&e&&(f.Xb(0,"td",33),f.Nc(1),f.kc(2,"date"),f.Wb()),2&e){const e=t.$implicit;f.Db(1),f.Pc(" ",f.mc(2,1,e.createdAt,"yyyy-MM-dd HH:mm")," ")}}function te(e,t){1&e&&(f.Xb(0,"th",47),f.Nc(1," Date Updated "),f.Wb())}function ae(e,t){if(1&e&&(f.Xb(0,"td",33),f.Nc(1),f.kc(2,"date"),f.Wb()),2&e){const e=t.$implicit;f.Db(1),f.Pc(" ",e.updatedAt?f.mc(2,1,e.updatedAt,"yyyy-MM-dd HH:mm"):"Never"," ")}}function ie(e,t){1&e&&f.Sb(0,"tr",48)}function ne(e,t){if(1&e&&(f.Xb(0,"tr",49),f.kc(1,"async"),f.Wb()),2&e){const e=t.$implicit,a=f.jc();f.Hb("dimmed",f.lc(1,4,a.loading$))("deleted",e.isDeleted)}}function ce(e,t){if(1&e&&(f.Xb(0,"div",50),f.Xb(1,"div",51),f.kc(2,"async"),f.Nc(3),f.kc(4,"async"),f.Wb(),f.Wb()),2&e){const e=f.jc();f.Db(1),f.Hb("dimmed",!f.lc(2,3,e.loading$)),f.Db(2),f.Pc(" ",f.lc(4,5,e.loading$)?"Loading data from server...":"No data to display"," ")}}var oe=function(e){return e.Id="id",e.Username="username",e.IsBlocked="is_blocked",e.IsDeleted="is_deleted",e.CreatedAt="created_at",e.UpdatedAt="updated_at",e}({});const se=oe.Id,le=[oe.Id,oe.Username,oe.IsBlocked,oe.IsDeleted,oe.CreatedAt,oe.UpdatedAt];let re=(()=>{class e{constructor(e,t){this.router=e,this.palladiumAdminService=t,this.destroy$=new g.a,this.loading$=new k.a(!1),this.reload$=new k.a(!0),this.needle$=new k.a(""),this.sort$=new k.a({active:se,direction:"asc"}),this.page$=new k.a({pageIndex:0,pageSize:10}),this.total$=new k.a(0),this.dataSource$=new k.a(new u.k),this.displayedColumns=[...le],this.column=oe,this.pageSizes=[10,25,50,100],Object(_.a)(this.reload$.asObservable(),this.needle$.asObservable().pipe(Object(R.a)(),Object(N.a)(450)),this.sort$.asObservable(),this.page$.asObservable()).pipe(Object(v.a)(this.destroy$),Object(L.a)(([e,t,a,i])=>({needle:t,orderBy:T.j.fromJson(a.active||se),orderDir:A.e.fromJson(a.direction||"asc"),limit:i.pageSize,offset:i.pageIndex*i.pageSize})),Object(O.a)(e=>{const t=!(this.args&&this.args.needle===e.needle&&this.args.orderBy===e.orderBy&&this.args.orderDir===e.orderDir&&this.args.limit===e.limit);return this.args=e,t&&this.page$.next({pageSize:e.limit,pageIndex:0}),!t})).subscribe(e=>this.loadItems(e))}ngOnDestroy(){this.subData instanceof j.a&&(this.subData.unsubscribe(),this.subData=null),this.destroy$.next(),this.destroy$.complete()}getData(e){return this.palladiumAdminService.getPersonnelAccounts(e.needle,e.orderBy,e.orderDir,e.offset,e.limit).pipe(Object(v.a)(this.destroy$),Object(x.a)(e=>this.total$.next(e.total)),Object(L.a)(e=>e.items))}loadItems(e){this.loading$.next(!0),this.subData instanceof j.a&&(this.subData.unsubscribe(),this.subData=null),this.subData=this.getData(e).pipe(Object(v.a)(this.destroy$),Object(P.a)(()=>this.loading$.next(!1))).subscribe(e=>{const t=new u.k;t.data=e,this.dataSource$.next(t)})}personnelAccountStatus(e){return e.isDeleted?"deleted":e.isBlocked?"blocked":"active"}personnelAccountBadgeClass(e){switch(this.personnelAccountStatus(e)){case"deleted":return"m-timeline-3__item--danger";case"blocked":return"m-timeline-3__item--warning";case"active":return"m-timeline-3__item--success";default:return"m-timeline-3__item--metal"}}onNeedleChange(e){this.needle$.next((e||"").trim())}onSortChange(e){this.sort$.next(e)}onPageChange(e){this.page$.next(e)}onReload(){this.reload$.next(!0)}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(S.g),f.Rb(I.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["m-personnel-accounts"]],decls:49,vars:33,consts:[[1,"row"],[1,"col-xl-12"],[1,"m-portlet","m-portlet--ngviewer"],[1,"m-portlet__head","compact"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"m-portlet__head-tools"],[1,"m-portlet__nav"],[1,"m-portlet__nav-item"],[1,"pr-2"],["floatLabel","never",2,"width","300px"],["matInput","","placeholder","Type to filter...",3,"value","keyup"],["href","javascript:void(null)","title","Refresh","matTooltip","Click to refresh","matTooltipPosition","above",1,"m-portlet__nav-link","m-portlet__nav-link--icon",3,"click"],[1,"la","la-refresh"],[1,"m-portlet__body","m-portlet__body--no-padding"],[1,"m-portlet__preview","p-0"],["mat-table","","matSort","","matSortDisableClear","",1,"table-hover",3,"dataSource","matSortActive","matSortDirection","matSortChange"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","","class","cell-id",4,"matHeaderCellDef"],["mat-cell","","class","cell-id",3,"deleted",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","","class","cell-checkbox",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header","","class","cell-datetime",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"dimmed","deleted",4,"matRowDef","matRowDefColumns"],["class","card card-body blank p-0 table-row",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","pageIndex","page"],["mat-header-cell","","mat-sort-header","",1,"cell-id"],["mat-cell","",1,"cell-id"],[1,"poppins","f-w-400"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"m-timeline-3","x-table","x-avatar"],[1,"m-timeline-3__items"],[1,"m-timeline-3__item","m-0",3,"ngClass"],[1,"m-timeline-3__item-time","text-left"],["defaultSet","identicon",3,"email","size","radius"],[1,"m-timeline-3__item-desc"],[1,"m-timeline-3__item-text","user-line"],["matTooltip","Click to edit","matTooltipPosition","above",3,"routerLink"],["class","v-a-middle ml-05 gold","matTooltip","Super\xa0Administrator: no restrictions applied ever","matTooltipPosition","above",3,"inline",4,"ngIf"],[1,"m-timeline-3__item-user-name"],[1,"m-timeline-3__item-text",3,"ngClass"],["matTooltip","Super\xa0Administrator: no restrictions applied ever","matTooltipPosition","above",1,"v-a-middle","ml-05","gold",3,"inline"],["mat-header-cell","","mat-sort-header","",1,"cell-checkbox"],["mat-header-cell","","mat-sort-header","",1,"cell-datetime"],["mat-header-row",""],["mat-row",""],[1,"card","card-body","blank","p-0","table-row"],[1,"inner-text","f-s-14","f-w-400"]],template:function(e,t){if(1&e&&(f.Xb(0,"div",0),f.Xb(1,"div",1),f.Xb(2,"div",2),f.Xb(3,"div",3),f.Xb(4,"div",4),f.Xb(5,"div",5),f.Sb(6,"h3",6),f.Wb(),f.Wb(),f.Xb(7,"div",7),f.Xb(8,"ul",8),f.Xb(9,"li",9),f.Xb(10,"div",10),f.Xb(11,"mat-form-field",11),f.Xb(12,"input",12),f.fc("keyup",(function(e){return t.onNeedleChange(e.target.value)})),f.kc(13,"async"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(14,"li",9),f.Xb(15,"a",13),f.fc("click",(function(){return t.onReload()})),f.Sb(16,"i",14),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(17,"div",15),f.Xb(18,"div",16),f.Xb(19,"table",17),f.fc("matSortChange",(function(e){return t.onSortChange(e)})),f.kc(20,"async"),f.kc(21,"async"),f.kc(22,"async"),f.Vb(23,18),f.Lc(24,H,2,0,"th",19),f.Lc(25,V,3,3,"td",20),f.Ub(),f.Vb(26,18),f.Lc(27,B,2,0,"th",21),f.Lc(28,Y,16,11,"td",22),f.Ub(),f.Vb(29,18),f.Lc(30,q,2,0,"th",23),f.Lc(31,E,2,1,"td",22),f.Ub(),f.Vb(32,18),f.Lc(33,K,2,0,"th",23),f.Lc(34,Z,2,1,"td",22),f.Ub(),f.Vb(35,18),f.Lc(36,Q,2,0,"th",24),f.Lc(37,ee,3,4,"td",22),f.Ub(),f.Vb(38,18),f.Lc(39,te,2,0,"th",24),f.Lc(40,ae,3,4,"td",22),f.Ub(),f.Lc(41,ie,1,0,"tr",25),f.Lc(42,ne,2,6,"tr",26),f.Wb(),f.Lc(43,ce,5,7,"div",27),f.kc(44,"async"),f.Xb(45,"mat-paginator",28),f.fc("page",(function(e){return t.onPageChange(e)})),f.kc(46,"async"),f.kc(47,"async"),f.kc(48,"async"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){var a;const e=0===(null==(a=f.lc(44,25,t.dataSource$))?null:null==a.data?null:a.data.length);f.Db(12),f.pc("value",f.lc(13,17,t.needle$)),f.Db(7),f.pc("dataSource",f.lc(20,19,t.dataSource$))("matSortActive",f.lc(21,21,t.sort$).active)("matSortDirection",f.lc(22,23,t.sort$).direction),f.Db(4),f.pc("matColumnDef",t.column.Id),f.Db(3),f.pc("matColumnDef",t.column.Username),f.Db(3),f.pc("matColumnDef",t.column.IsBlocked),f.Db(3),f.pc("matColumnDef",t.column.IsDeleted),f.Db(3),f.pc("matColumnDef",t.column.CreatedAt),f.Db(3),f.pc("matColumnDef",t.column.UpdatedAt),f.Db(3),f.pc("matHeaderRowDef",t.displayedColumns),f.Db(1),f.pc("matRowDefColumns",t.displayedColumns),f.Db(1),f.pc("ngIf",e),f.Db(2),f.pc("length",f.lc(46,27,t.total$))("pageSize",f.lc(47,29,t.page$).pageSize)("pageSizeOptions",t.pageSizes)("pageIndex",f.lc(48,31,t.page$).pageIndex)}},directives:[M.a,r.b,p.a,u.j,m.a,u.c,u.e,u.b,u.g,u.i,i.m,d.a,u.d,m.b,u.a,i.k,G,S.h,l.a,u.f,u.h],pipes:[i.b,i.e],styles:[".user-line[_ngcontent-%COMP%]{line-height:17px}"],changeDetection:0}),e})();var be=a("eIep"),de=a("4j9A"),me=a("/Xw5"),ue=a("Y4+Y");function pe(e,t){if(1&e){const e=f.Yb();f.Xb(0,"button",3),f.fc("click",(function(){return f.Cc(e),f.jc(2).close()})),f.Xb(1,"span",4),f.Nc(2,"\xd7"),f.Wb(),f.Wb()}}const he=function(e){return{"alert-dismissible":e}};function fe(e,t){if(1&e&&(f.Xb(0,"div",1),f.Lc(1,pe,3,0,"button",2),f.Xb(2,"span"),f.Nc(3),f.Wb(),f.Wb()),2&e){const e=f.jc();f.Gb("alert alert-",e.kind," mb-0"),f.pc("ngClass",f.uc(6,he,e.dismissible)),f.Db(1),f.pc("ngIf",e.dismissible),f.Db(2),f.Oc(e.message)}}let ge=(()=>{class e{constructor(){this.message=null,this.messageChanged=new f.o,this.kind="primary",this.dismissible=!0}close(){this.message=null,this.messageChanged.emit(this.message)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Lb({type:e,selectors:[["m-alert"]],inputs:{message:"message",kind:"kind",dismissible:"dismissible"},outputs:{messageChanged:"messageChanged"},decls:1,vars:1,consts:[["role","alert",3,"class","ngClass",4,"ngIf"],["role","alert",3,"ngClass"],["aria-label","Close","class","close ng-star-inserted","type","button",3,"click",4,"ngIf"],["aria-label","Close","type","button",1,"close","ng-star-inserted",3,"click"],["aria-hidden","true"]],template:function(e,t){1&e&&f.Lc(0,fe,4,8,"div",0),2&e&&f.pc("ngIf",t.message)},directives:[i.m,i.k],encapsulation:2,changeDetection:0}),e})();function ve(e,t){if(1&e&&(f.Xb(0,"div",34),f.Xb(1,"div",35),f.Sb(2,"m-alert",36),f.kc(3,"async"),f.kc(4,"async"),f.kc(5,"async"),f.Wb(),f.Wb()),2&e){const e=f.jc();var a;const t=null==(a=f.lc(3,3,e.alert$))?null:a.message;var i;const c=null==(i=f.lc(4,5,e.alert$))?null:i.kind;var n;const o=null==(n=f.lc(5,7,e.alert$))?null:n.dismissable;f.Db(2),f.pc("message",t)("kind",c)("dismissible",o)}}function De(e,t){1&e&&(f.Xb(0,"th",37),f.Nc(1," Project ID "),f.Wb())}function ye(e,t){if(1&e&&(f.Xb(0,"td",38),f.Xb(1,"strong"),f.Nc(2),f.Wb(),f.Wb()),2&e){const e=t.$implicit;f.Db(2),f.Oc(e.projectId)}}function Xe(e,t){1&e&&(f.Xb(0,"th",39),f.Nc(1," Project Title "),f.Wb())}function We(e,t){if(1&e&&(f.Xb(0,"td",40),f.Xb(1,"strong"),f.Nc(2),f.Wb(),f.Wb()),2&e){const e=t.$implicit;f.Db(2),f.Oc(e.projectTitle)}}function $e(e,t){1&e&&(f.Xb(0,"th",41),f.Xb(1,"span",42),f.Nc(2," Group Roles "),f.Sb(3,"i",43),f.Wb(),f.Wb())}function Ce(e,t){1&e&&(f.Vb(0),f.Xb(1,"strong",47),f.Nc(2,"None"),f.Wb(),f.Ub())}function we(e,t){if(1&e&&(f.Xb(0,"div",49),f.Xb(1,"strong",50),f.Nc(2),f.Wb(),f.Xb(3,"mat-icon",51),f.Nc(4,"group"),f.Wb(),f.Xb(5,"a",52),f.Xb(6,"strong"),f.Nc(7),f.Wb(),f.Wb(),f.Wb()),2&e){const e=t.$implicit,a=f.jc(3);f.Db(2),f.Oc(a.roleName(e.value)),f.Db(1),f.pc("inline",!0),f.Db(2),f.rc("routerLink","/personnel/groups/",e.key,""),f.Db(2),f.Oc(e.key)}}function Se(e,t){if(1&e&&(f.Vb(0),f.Lc(1,we,8,4,"div",48),f.kc(2,"keyvalue"),f.Ub()),2&e){const e=f.jc().$implicit;f.Db(1),f.pc("ngForOf",f.lc(2,1,e.groupRoles))}}function ke(e,t){1&e&&(f.Xb(0,"td",44),f.Lc(1,Ce,3,0,"ng-container",45),f.Lc(2,Se,3,3,"ng-container",46),f.Wb()),2&e&&(f.pc("ngSwitch",t.$implicit.groupRoles),f.Db(1),f.pc("ngSwitchCase",null))}function _e(e,t){1&e&&(f.Xb(0,"th",53),f.Xb(1,"span",54),f.Nc(2," User Role "),f.Sb(3,"i",43),f.Wb(),f.Wb())}const je=function(e){return{role:e}};function Re(e,t){if(1&e&&(f.Xb(0,"td",40),f.Xb(1,"div",55),f.Xb(2,"a",56),f.Xb(3,"strong"),f.Nc(4),f.Wb(),f.Wb(),f.Xb(5,"mat-icon",57),f.Nc(6,"keyboard_arrow_down"),f.Wb(),f.Wb(),f.Wb()),2&e){const e=t.$implicit,a=f.jc(),i=f.yc(53);f.Db(1),f.pc("matMenuTriggerFor",i)("matMenuTriggerData",f.uc(4,je,e)),f.Db(3),f.Oc(a.roleName(e.userRole)||"None"),f.Db(1),f.pc("inline",!0)}}function Ne(e,t){1&e&&(f.Xb(0,"th",58),f.Nc(1," Databases "),f.Wb())}function Le(e,t){1&e&&(f.Xb(0,"span",62),f.Nc(1,"None"),f.Wb())}function Oe(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",49),f.Xb(1,"mat-checkbox",66),f.fc("change",(function(a){f.Cc(e);const i=t.$implicit,n=f.jc(3).$implicit;return f.jc().onDbChange(n,i,a.checked)})),f.Xb(2,"span",67),f.Nc(3),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=t.$implicit,a=f.jc(3).$implicit;f.Db(1),f.pc("checked",-1!==a.dbs.indexOf(e)),f.Db(2),f.Pc(" ",e," ")}}function xe(e,t){if(1&e&&(f.Vb(0),f.Lc(1,Oe,4,2,"div",48),f.Ub()),2&e){const e=f.jc(2).$implicit;f.Db(1),f.pc("ngForOf",e.projectDbs)}}function Pe(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div"),f.Xb(1,"mat-checkbox",63),f.fc("change",(function(t){f.Cc(e);const a=f.jc().$implicit;return f.jc().onGlobalDbsChange(a,t.checked)})),f.Xb(2,"strong",64),f.Nc(3,"All"),f.Wb(),f.Wb(),f.Lc(4,xe,2,1,"ng-container",65),f.Wb()}if(2&e){const e=f.jc().$implicit;f.Hb("mt-1",!e.isGlobal)("mb-1",!e.isGlobal),f.Db(1),f.pc("checked",e.isGlobal),f.Db(3),f.pc("ngIf",!e.isGlobal)}}function Ie(e,t){1&e&&(f.Xb(0,"div",68),f.Xb(1,"mat-icon",69),f.Nc(2,"done_all"),f.Wb(),f.Xb(3,"strong",70),f.Nc(4,"All"),f.Wb(),f.Wb())}function Ae(e,t){if(1&e&&(f.Xb(0,"td",44),f.Lc(1,Le,2,0,"span",59),f.Lc(2,Pe,5,6,"div",60),f.Lc(3,Ie,5,0,"div",61),f.Wb()),2&e){const e=t.$implicit,a=f.jc();f.pc("ngSwitch",e.userRole),f.Db(1),f.pc("ngSwitchCase",null),f.Db(1),f.pc("ngSwitchCase",a.accessRole.Consumer)}}function Te(e,t){1&e&&(f.Xb(0,"th",41),f.Xb(1,"span",71),f.Nc(2," Effective Role "),f.Sb(3,"i",43),f.Wb(),f.Wb())}function Me(e,t){if(1&e&&(f.Xb(0,"div",49),f.Xb(1,"span",74),f.Nc(2,"inherited from"),f.Wb(),f.Xb(3,"mat-icon",51),f.Nc(4,"group"),f.Wb(),f.Xb(5,"a",52),f.Xb(6,"strong"),f.Nc(7),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.jc().$implicit;f.Db(3),f.pc("inline",!0),f.Db(2),f.rc("routerLink","/personnel/groups/",e.effectiveGroup,""),f.Db(2),f.Oc(e.effectiveGroup)}}function Ue(e,t){1&e&&(f.Xb(0,"div",49),f.Xb(1,"div",74),f.Xb(2,"mat-icon",69),f.Nc(3,"done_all"),f.Wb(),f.Xb(4,"span"),f.Nc(5,"All databases available"),f.Wb(),f.Wb(),f.Wb())}function ze(e,t){1&e&&(f.Xb(0,"span",74),f.Nc(1," No databases available "),f.Wb())}function Ge(e,t){if(1&e&&(f.Xb(0,"span",74),f.Nc(1," Databases: "),f.Xb(2,"strong"),f.Nc(3),f.Wb(),f.Wb()),2&e){const e=f.jc(2).$implicit;f.Db(3),f.Oc(e.effectiveDbs.join(", "))}}function He(e,t){if(1&e&&(f.Xb(0,"div",75),f.Lc(1,ze,2,0,"span",76),f.Lc(2,Ge,4,1,"span",77),f.Wb()),2&e){const e=f.jc().$implicit;f.pc("ngSwitch",null==e.effectiveDbs?null:e.effectiveDbs.length),f.Db(1),f.pc("ngSwitchCase",0)}}function Ve(e,t){if(1&e&&(f.Xb(0,"td",40),f.Xb(1,"div",49),f.Xb(2,"strong",47),f.Nc(3),f.Wb(),f.Wb(),f.Lc(4,Me,8,3,"div",72),f.Lc(5,Ue,6,0,"div",72),f.Lc(6,He,3,2,"div",73),f.Wb()),2&e){const e=t.$implicit,a=f.jc();f.Db(3),f.Oc(a.roleName(e.effectiveRole)||"None"),f.Db(1),f.pc("ngIf",e.effectiveGroup),f.Db(1),f.pc("ngIf",e.effectiveAllDbs),f.Db(1),f.pc("ngIf",!e.effectiveAllDbs)}}function Be(e,t){1&e&&f.Sb(0,"tr",78)}function Fe(e,t){if(1&e&&(f.Xb(0,"tr",79),f.kc(1,"async"),f.Wb()),2&e){const e=t.$implicit,a=f.jc();f.Hb("dimmed",f.lc(1,4,a.loading$))("deleted",e.isDeleted)}}function Je(e,t){if(1&e&&(f.Xb(0,"div",80),f.Xb(1,"div",81),f.kc(2,"async"),f.Nc(3),f.kc(4,"async"),f.Wb(),f.Wb()),2&e){const e=f.jc();f.Db(1),f.Hb("dimmed",!f.lc(2,3,e.loading$)),f.Db(2),f.Pc(" ",f.lc(4,5,e.loading$)?"Loading data from server...":"No data to display"," ")}}function Ye(e,t){if(1&e){const e=f.Yb();f.Xb(0,"button",82),f.fc("click",(function(){f.Cc(e);const a=t.role;return f.jc().onRoleReset(a)})),f.Nc(1," None "),f.Wb(),f.Xb(2,"button",82),f.fc("click",(function(){f.Cc(e);const a=t.role,i=f.jc();return i.onRoleChange(a,i.accessRole.Consumer)})),f.Nc(3),f.Wb(),f.Xb(4,"button",82),f.fc("click",(function(){f.Cc(e);const a=t.role,i=f.jc();return i.onRoleChange(a,i.accessRole.Maintainer)})),f.Nc(5),f.Wb(),f.Xb(6,"button",82),f.fc("click",(function(){f.Cc(e);const a=t.role,i=f.jc();return i.onRoleChange(a,i.accessRole.Admin)})),f.Nc(7),f.Wb()}if(2&e){const e=t.role,a=f.jc();f.pc("disabled",!e.userRole),f.Db(2),f.pc("disabled",e.userRole===a.accessRole.Consumer),f.Db(1),f.Pc(" ",a.roleName(a.accessRole.Consumer)," "),f.Db(1),f.pc("disabled",e.userRole===a.accessRole.Maintainer),f.Db(1),f.Pc(" ",a.roleName(a.accessRole.Maintainer)," "),f.Db(1),f.pc("disabled",e.userRole===a.accessRole.Admin),f.Db(1),f.Pc(" ",a.roleName(a.accessRole.Admin)," ")}}var qe=function(e){return e.ProjectId="project_id",e.ProjectTitle="project_title",e.GroupRoles="group_roles",e.UserRole="user_role",e.ProjectDbs="project_dbs",e.EffectiveRole="effective_role",e}({});const Ee=qe.ProjectId,Ke=[qe.ProjectId,qe.ProjectTitle,qe.GroupRoles,qe.UserRole,qe.ProjectDbs,qe.EffectiveRole];let Ze=(()=>{class e{constructor(e,t,a,i,n,c,o){this.activatedRoute=e,this.router=t,this.cdr=a,this.clipboardService=i,this.subheaderService=n,this.palladiumAdminService=c,this.notificationService=o,this.destroy$=new g.a,this.loading$=new k.a(!1),this.account$=new k.a(null),this.alert$=new k.a(null),this.reload$=new k.a(!0),this.needle$=new k.a(""),this.sort$=new k.a({active:Ee,direction:"asc"}),this.page$=new k.a({pageIndex:0,pageSize:10}),this.total$=new k.a(0),this.dataSource$=new k.a(new u.k),this.displayedColumns=[...Ke],this.column=qe,this.accessRole=T.a,this.pageSizes=[10,25,50,100],Object(_.a)(this.activatedRoute.paramMap.pipe(Object(L.a)(e=>e.get("username")),Object(R.a)(),Object(be.a)(e=>this.palladiumAdminService.getPersonnelAccountByUsername(e)),Object(x.a)(e=>this.onAccountChange(e))),this.reload$.asObservable(),this.needle$.asObservable().pipe(Object(R.a)(),Object(N.a)(450)),this.sort$.asObservable(),this.page$.asObservable()).pipe(Object(v.a)(this.destroy$),Object(L.a)(([e,t,a,i,n])=>({accountId:e.id,needle:a,orderBy:T.m.fromJson(i.active||Ee),orderDir:A.e.fromJson(i.direction||"asc"),limit:n.pageSize,offset:n.pageIndex*n.pageSize})),Object(O.a)(e=>{const t=!(this.args&&this.args.accountId===e.accountId&&this.args.needle===e.needle&&this.args.orderBy===e.orderBy&&this.args.orderDir===e.orderDir&&this.args.limit===e.limit);return this.args=e,t&&this.page$.next({pageSize:e.limit,pageIndex:0}),!t})).subscribe(e=>this.loadItems(e))}ngOnDestroy(){this.subData instanceof j.a&&(this.subData.unsubscribe(),this.subData=null),this.destroy$.next(),this.destroy$.complete(),this.loading$.complete()}getData(e){return this.palladiumAdminService.getPersonnelAccountRoles(e.accountId,e.needle,e.orderBy,e.orderDir,e.offset,e.limit).pipe(Object(v.a)(this.destroy$),Object(x.a)(e=>this.total$.next(e.total)),Object(L.a)(e=>e.items))}loadItems(e){this.loading$.next(!0),this.subData instanceof j.a&&(this.subData.unsubscribe(),this.subData=null),this.subData=this.getData(e).pipe(Object(v.a)(this.destroy$),Object(L.a)(e=>e.map(e=>{const t=this.effectiveRole(e.userRole,e.groupRoles),a=e.userRole===T.a.Consumer&&e.isGlobal,i=Object.values(e.groupRoles).filter(e=>T.a.fromJson(e.role)===T.a.Consumer&&e.is_global).length>0;return e.effectiveRole=t.role,e.effectiveGroup=t.groupName,e.effectiveAllDbs=t.role>=T.a.Maintainer||i||a,e.effectiveDbs=this.effectiveDbs(e),e})),Object(P.a)(()=>this.loading$.next(!1))).subscribe(e=>{const t=new u.k;t.data=e,this.dataSource$.next(t)})}roleName(e){const t="string"==typeof e?T.a.fromJson(e):e;return T.a.getDescription(t)}mostPrivilegedGroup(e){const t=e||{},a=Object.keys(t);return a.length>0?a.sort((e,a)=>T.a.fromJson(t[e].role)>T.a.fromJson(t[a].role)?-1:1)[0]:null}effectiveRole(e,t){const a=this.mostPrivilegedGroup(t),i=a?T.a.fromJson(t[a].role):null,n=(i||0)>(e||0),c={role:null,groupName:null};return e||a?(c.role=n?i:e,c.groupName=n?a:null,c):c}effectiveDbs(e){const t=new Set;return Object.values(e.groupRoles).filter(e=>T.a.fromJson(e.role)===T.a.Consumer).forEach(e=>e.dbs.forEach(e=>t.add(e))),e.userRole===T.a.Consumer&&e.dbs.forEach(e=>t.add(e)),[...t].sort((e,t)=>e>t?1:-1)}updatePageStatus(e){this.subheaderService.setTitle(e.name),this.subheaderService.setBreadcrumbs([{title:"Personnel Accounts",page:"/personnel/accounts"},{title:e.name,page:`/personnel/accounts/${e.username}`}]),this.alert$.next(null),this.cdr.detectChanges()}onNeedleChange(e){this.needle$.next((e||"").trim())}onSortChange(e){this.sort$.next(e)}onPageChange(e){this.page$.next(e)}onReload(){this.reload$.next(!0)}onAccountChange(e){this.account$.next(e),this.updatePageStatus(e)}onRoleChange(e,t){e.userRole!==t&&this.setPersonnelAccountRole(e.personnelId,e.projectId,t).subscribe(e=>{this.reload$.next(!0),this.notificationService.success("Role changed")})}onRoleReset(e){e.userRole&&this.resetPersonnelAccountRole(e.personnelId,e.projectId).subscribe(e=>{this.reload$.next(!0),this.notificationService.success("Role changed")})}onGlobalDbsChange(e,t){this.setPersonnelAccountRole(e.personnelId,e.projectId,e.userRole,t,[]).subscribe(e=>{this.reload$.next(!0),this.notificationService.success("Database access updated")})}onDbChange(e,t,a){const i=e.dbs.indexOf(t);let n=[];a&&-1===i?n=[...e.dbs,t]:a||-1===i||(n=e.dbs.filter(e=>e!==t)),this.setPersonnelAccountRole(e.personnelId,e.projectId,e.userRole,!1,n).subscribe(e=>{this.reload$.next(!0),this.notificationService.success("Database access updated")})}setPersonnelAccountRole(e,t,a,i=null,n=null){const c=new T.b;return"boolean"==typeof i&&(c.isGlobal=i),n instanceof Array&&(c.dbs=n),c.role=a,this.palladiumAdminService.setPersonnelAccountRole(c,e,t).pipe(Object(v.a)(this.destroy$))}resetPersonnelAccountRole(e,t){return this.palladiumAdminService.resetPersonnelAccountRole(e,t).pipe(Object(v.a)(this.destroy$))}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(S.a),f.Rb(S.g),f.Rb(f.h),f.Rb(me.a),f.Rb(de.a),f.Rb(I.a),f.Rb(ue.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["m-personnel-account-manage"]],decls:55,vars:36,consts:[["class","row mb-2",4,"ngIf"],[1,"row"],[1,"col-xl-12"],[1,"m-portlet","m-portlet--ngviewer"],[1,"m-portlet__head","compact"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"m-portlet__head-tools"],[1,"m-portlet__nav"],[1,"m-portlet__nav-item"],[1,"pr-2"],["floatLabel","never",2,"width","300px"],["matInput","","placeholder","Type to filter...",3,"value","keyup"],["href","javascript:void(null)","title","Refresh","matTooltip","Click to refresh","matTooltipPosition","above",1,"m-portlet__nav-link","m-portlet__nav-link--icon",3,"click"],[1,"la","la-refresh"],[1,"m-portlet__body","m-portlet__body--no-padding"],[1,"m-portlet__preview","p-0"],["mat-table","","matSort","","matSortDisableClear","",1,"table-hover",3,"dataSource","matSortActive","matSortDirection","matSortChange"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","","class","cell-uid",4,"matHeaderCellDef"],["mat-cell","","class","cell-uid",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","","class","cell-role-list",4,"matHeaderCellDef"],["mat-cell","",3,"ngSwitch",4,"matCellDef"],["mat-header-cell","","mat-sort-header","","class","cell-role",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header","","class","cell-role-long",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"dimmed","deleted",4,"matRowDef","matRowDefColumns"],["class","card card-body blank p-0 table-row",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","pageIndex","page"],["roleMenu","matMenu"],["matMenuContent",""],[1,"row","mb-2"],[1,"col-lg-12","mb-2","f-s-14"],[3,"message","kind","dismissible"],["mat-header-cell","","mat-sort-header","",1,"cell-uid"],["mat-cell","",1,"cell-uid"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"cell-role-list"],["matTooltip","Personnel groups are managed at corporate LDAP service","matTooltipPosition","above"],[1,"la","la-question-circle","hint-icon","dimmed"],["mat-cell","",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"light-gray"],["class","block group-role",4,"ngFor","ngForOf"],[1,"block","group-role"],[1,"v-a-middle","light-gray","mr-1"],[1,"v-a-middle","metal",3,"inline"],["matTooltip","Click to manage","matTooltipPosition","above",1,"v-a-middle","ml-05",3,"routerLink"],["mat-header-cell","","mat-sort-header","",1,"cell-role"],["matTooltip","Access role assigned to current user explicitly","matTooltipPosition","above"],[1,"clickable",3,"matMenuTriggerFor","matMenuTriggerData"],["href","javascript:void(null)","matTooltip","Click to change","matTooltipPosition","above"],[1,"metal","v-a-middle",3,"inline"],["mat-header-cell","","mat-sort-header","",1,"cell-role-long"],["class","dimmed",4,"ngSwitchCase"],[3,"mt-1","mb-1",4,"ngSwitchCase"],["matTooltip","All current and future databases","matTooltipPosition","above",4,"ngSwitchDefault"],[1,"dimmed"],["color","primary","matTooltip","All current and future databases","matTooltipPosition","above",3,"checked","change"],[1,"f-w-600","v-a-middle","checkbox-label"],[4,"ngIf"],["color","primary",3,"checked","change"],[1,"f-w-400","v-a-middle","checkbox-label"],["matTooltip","All current and future databases","matTooltipPosition","above"],[1,"v-a-middle","blue","f-s-21"],[1,"f-w-600"],["matTooltip","The most privileged role: either inherited from group or assigned personally","matTooltipPosition","above"],["class","block group-role",4,"ngIf"],["class","block group-role",3,"ngSwitch",4,"ngIf"],[1,"v-a-middle","light-gray","f-w-400","mr-1"],[1,"block","group-role",3,"ngSwitch"],["class","v-a-middle light-gray f-w-400 mr-1",4,"ngSwitchCase"],["class","v-a-middle light-gray f-w-400 mr-1",4,"ngSwitchDefault"],["mat-header-row",""],["mat-row",""],[1,"card","card-body","blank","p-0","table-row"],[1,"inner-text","f-s-14","f-w-400"],["mat-menu-item","",3,"disabled","click"]],template:function(e,t){if(1&e&&(f.Lc(0,ve,6,9,"div",0),f.kc(1,"async"),f.Xb(2,"div",1),f.Xb(3,"div",2),f.Xb(4,"div",3),f.Xb(5,"div",4),f.Xb(6,"div",5),f.Xb(7,"div",6),f.Xb(8,"h3",7),f.Nc(9," User access roles "),f.Wb(),f.Wb(),f.Wb(),f.Xb(10,"div",8),f.Xb(11,"ul",9),f.Xb(12,"li",10),f.Xb(13,"div",11),f.Xb(14,"mat-form-field",12),f.Xb(15,"input",13),f.fc("keyup",(function(e){return t.onNeedleChange(e.target.value)})),f.kc(16,"async"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(17,"li",10),f.Xb(18,"a",14),f.fc("click",(function(){return t.onReload()})),f.Sb(19,"i",15),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(20,"div",16),f.Xb(21,"div",17),f.Xb(22,"table",18),f.fc("matSortChange",(function(e){return t.onSortChange(e)})),f.kc(23,"async"),f.kc(24,"async"),f.kc(25,"async"),f.Vb(26,19),f.Lc(27,De,2,0,"th",20),f.Lc(28,ye,3,1,"td",21),f.Ub(),f.Vb(29,19),f.Lc(30,Xe,2,0,"th",22),f.Lc(31,We,3,1,"td",23),f.Ub(),f.Vb(32,19),f.Lc(33,$e,4,0,"th",24),f.Lc(34,ke,3,2,"td",25),f.Ub(),f.Vb(35,19),f.Lc(36,_e,4,0,"th",26),f.Lc(37,Re,7,6,"td",23),f.Ub(),f.Vb(38,19),f.Lc(39,Ne,2,0,"th",27),f.Lc(40,Ae,4,3,"td",25),f.Ub(),f.Vb(41,19),f.Lc(42,Te,4,0,"th",24),f.Lc(43,Ve,7,4,"td",23),f.Ub(),f.Lc(44,Be,1,0,"tr",28),f.Lc(45,Fe,2,6,"tr",29),f.Wb(),f.Lc(46,Je,5,7,"div",30),f.kc(47,"async"),f.Xb(48,"mat-paginator",31),f.fc("page",(function(e){return t.onPageChange(e)})),f.kc(49,"async"),f.kc(50,"async"),f.kc(51,"async"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(52,"mat-menu",null,32),f.Lc(54,Ye,8,7,"ng-template",33),f.Wb()),2&e){var a;const e=0===(null==(a=f.lc(47,28,t.dataSource$))?null:null==a.data?null:a.data.length);f.pc("ngIf",f.lc(1,18,t.alert$)),f.Db(15),f.pc("value",f.lc(16,20,t.needle$)),f.Db(7),f.pc("dataSource",f.lc(23,22,t.dataSource$))("matSortActive",f.lc(24,24,t.sort$).active)("matSortDirection",f.lc(25,26,t.sort$).direction),f.Db(4),f.pc("matColumnDef",t.column.ProjectId),f.Db(3),f.pc("matColumnDef",t.column.ProjectTitle),f.Db(3),f.pc("matColumnDef",t.column.GroupRoles),f.Db(3),f.pc("matColumnDef",t.column.UserRole),f.Db(3),f.pc("matColumnDef",t.column.ProjectDbs),f.Db(3),f.pc("matColumnDef",t.column.EffectiveRole),f.Db(3),f.pc("matHeaderRowDef",t.displayedColumns),f.Db(1),f.pc("matRowDefColumns",t.displayedColumns),f.Db(1),f.pc("ngIf",e),f.Db(2),f.pc("length",f.lc(49,30,t.total$))("pageSize",f.lc(50,32,t.page$).pageSize)("pageSizeOptions",t.pageSizes)("pageIndex",f.lc(51,34,t.page$).pageIndex)}},directives:[i.m,M.a,r.b,p.a,u.j,m.a,u.c,u.e,u.b,u.g,u.i,d.a,b.e,b.a,ge,u.d,m.b,u.a,i.o,i.p,i.q,i.l,l.a,S.h,b.d,o.a,u.f,u.h,b.b],pipes:[i.b,i.g],styles:[".group-role[_ngcontent-%COMP%]{line-height:20px}.checkbox-label[_ngcontent-%COMP%]{line-height:23px}"],changeDetection:0}),e})();function Qe(e,t){1&e&&(f.Xb(0,"th",32),f.Nc(1," ID "),f.Wb())}function et(e,t){if(1&e&&(f.Xb(0,"td",33),f.Xb(1,"span",34),f.Nc(2),f.Wb(),f.Wb()),2&e){const e=t.$implicit;f.Hb("deleted",e.isDeleted),f.Db(2),f.Pc(" ",e.id," ")}}function tt(e,t){1&e&&(f.Xb(0,"th",35),f.Nc(1," Name "),f.Wb())}function at(e,t){1&e&&(f.Xb(0,"mat-icon",39),f.Nc(1," star "),f.Wb()),2&e&&f.pc("inline",!0)}function it(e,t){if(1&e&&(f.Xb(0,"td",36),f.Xb(1,"a",37),f.Xb(2,"strong"),f.Nc(3),f.Wb(),f.Wb(),f.Lc(4,at,2,1,"mat-icon",38),f.Wb()),2&e){const e=t.$implicit;f.Db(1),f.qc("routerLink",e.name),f.Db(2),f.Oc(e.name),f.Db(1),f.pc("ngIf",e.isSuperadmin)}}function nt(e,t){1&e&&(f.Xb(0,"th",40),f.Nc(1," Members "),f.Wb())}function ct(e,t){1&e&&(f.Vb(0),f.Xb(1,"span",43),f.Nc(2,"None"),f.Wb(),f.Ub())}function ot(e,t){if(1&e&&(f.Xb(0,"span",45),f.Xb(1,"mat-icon",46),f.Nc(2,"person"),f.Wb(),f.Xb(3,"a",37),f.Nc(4),f.Wb(),f.Wb()),2&e){const e=t.$implicit;f.Db(1),f.pc("inline",!0),f.Db(2),f.rc("routerLink","/personnel/accounts/",e,""),f.Db(1),f.Oc(e)}}function st(e,t){if(1&e&&(f.Vb(0),f.Lc(1,ot,5,3,"span",44),f.Ub()),2&e){const e=f.jc().$implicit;f.Db(1),f.pc("ngForOf",e.members)}}function lt(e,t){if(1&e&&(f.Xb(0,"span",45),f.Xb(1,"mat-icon",46),f.Nc(2,"person"),f.Wb(),f.Xb(3,"a",37),f.Nc(4),f.Wb(),f.Wb()),2&e){const e=t.$implicit;f.Db(1),f.pc("inline",!0),f.Db(2),f.rc("routerLink","/personnel/accounts/",e,""),f.Db(1),f.Oc(e)}}function rt(e,t){if(1&e&&(f.Vb(0),f.Xb(1,"span"),f.Lc(2,lt,5,3,"span",44),f.Wb(),f.Xb(3,"span",47),f.Nc(4," and "),f.Xb(5,"a",37),f.Nc(6),f.Wb(),f.Wb(),f.Ub()),2&e){const e=f.jc().$implicit;f.Db(2),f.pc("ngForOf",e.members.slice(0,3)),f.Db(3),f.qc("routerLink",e.name),f.Db(1),f.Pc(" ",e.members.length-3," more ")}}function bt(e,t){if(1&e&&(f.Xb(0,"td",41),f.Lc(1,ct,3,0,"ng-container",42),f.Lc(2,st,2,1,"ng-container",42),f.Lc(3,rt,7,3,"ng-container",42),f.Wb()),2&e){const e=t.$implicit;f.Db(1),f.pc("ngIf",0===e.members.length),f.Db(1),f.pc("ngIf",e.members.length>0&&e.members.length<5),f.Db(1),f.pc("ngIf",e.members.length>=5)}}function dt(e,t){1&e&&(f.Xb(0,"th",48),f.Nc(1," Count "),f.Wb())}function mt(e,t){if(1&e&&(f.Xb(0,"td",36),f.Nc(1),f.Wb()),2&e){const e=t.$implicit;f.Db(1),f.Pc(" ",e.memberCount," ")}}function ut(e,t){1&e&&(f.Xb(0,"th",49),f.Nc(1," Deleted "),f.Wb())}function pt(e,t){if(1&e&&(f.Xb(0,"td",36),f.Nc(1),f.Wb()),2&e){const e=t.$implicit;f.Db(1),f.Pc(" ",e.isDeleted?"Yes":"No"," ")}}function ht(e,t){1&e&&(f.Xb(0,"th",50),f.Nc(1," Date Added "),f.Wb())}function ft(e,t){if(1&e&&(f.Xb(0,"td",36),f.Nc(1),f.kc(2,"date"),f.Wb()),2&e){const e=t.$implicit;f.Db(1),f.Pc(" ",f.mc(2,1,e.createdAt,"yyyy-MM-dd HH:mm")," ")}}function gt(e,t){1&e&&(f.Xb(0,"th",50),f.Nc(1," Date Updated "),f.Wb())}function vt(e,t){if(1&e&&(f.Xb(0,"td",36),f.Nc(1),f.kc(2,"date"),f.Wb()),2&e){const e=t.$implicit;f.Db(1),f.Pc(" ",e.updatedAt?f.mc(2,1,e.updatedAt,"yyyy-MM-dd HH:mm"):"Never"," ")}}function Dt(e,t){1&e&&f.Sb(0,"tr",51)}function yt(e,t){if(1&e&&(f.Xb(0,"tr",52),f.kc(1,"async"),f.Wb()),2&e){const e=t.$implicit,a=f.jc();f.Hb("dimmed",f.lc(1,4,a.loading$))("deleted",e.isDeleted)}}function Xt(e,t){if(1&e&&(f.Xb(0,"div",53),f.Xb(1,"div",54),f.kc(2,"async"),f.Nc(3),f.kc(4,"async"),f.Wb(),f.Wb()),2&e){const e=f.jc();f.Db(1),f.Hb("dimmed",!f.lc(2,3,e.loading$)),f.Db(2),f.Pc(" ",f.lc(4,5,e.loading$)?"Loading data from server...":"No data to display"," ")}}var Wt=function(e){return e.Id="id",e.Name="name",e.Members="members",e.MemberCount="member_count",e.IsDeleted="is_deleted",e.CreatedAt="created_at",e.UpdatedAt="updated_at",e}({});const $t=Wt.Name,Ct=[Wt.Id,Wt.Name,Wt.Members,Wt.MemberCount,Wt.IsDeleted,Wt.CreatedAt,Wt.UpdatedAt];let wt=(()=>{class e{constructor(e,t){this.router=e,this.palladiumAdminService=t,this.destroy$=new g.a,this.loading$=new k.a(!1),this.reload$=new k.a(!0),this.needle$=new k.a(""),this.sort$=new k.a({active:$t,direction:"asc"}),this.page$=new k.a({pageIndex:0,pageSize:10}),this.total$=new k.a(0),this.dataSource$=new k.a(new u.k),this.displayedColumns=[...Ct],this.column=Wt,this.pageSizes=[10,25,50,100],Object(_.a)(this.reload$.asObservable(),this.needle$.asObservable().pipe(Object(R.a)(),Object(N.a)(450)),this.sort$.asObservable(),this.page$.asObservable()).pipe(Object(v.a)(this.destroy$),Object(L.a)(([e,t,a,i])=>({needle:t,orderBy:T.o.fromJson(a.active),orderDir:A.e.fromJson(a.direction),limit:i.pageSize,offset:i.pageIndex*i.pageSize})),Object(O.a)(e=>{const t=!(this.args&&this.args.needle===e.needle&&this.args.orderBy===e.orderBy&&this.args.orderDir===e.orderDir&&this.args.limit===e.limit);return this.args=e,t&&this.page$.next({pageSize:e.limit,pageIndex:0}),!t})).subscribe(e=>this.loadItems(e))}ngOnDestroy(){this.subData instanceof j.a&&(this.subData.unsubscribe(),this.subData=null),this.destroy$.next(),this.destroy$.complete()}getData(e){return this.palladiumAdminService.getPersonnelGroups(e.needle,e.orderBy,e.orderDir,e.offset,e.limit).pipe(Object(v.a)(this.destroy$),Object(x.a)(e=>this.total$.next(e.total)),Object(L.a)(e=>e.items))}loadItems(e){this.loading$.next(!0),this.subData instanceof j.a&&(this.subData.unsubscribe(),this.subData=null),this.subData=this.getData(e).pipe(Object(v.a)(this.destroy$),Object(P.a)(()=>this.loading$.next(!1))).subscribe(e=>{const t=new u.k;t.data=e,this.dataSource$.next(t)})}onNeedleChange(e){this.needle$.next((e||"").trim())}onSortChange(e){this.sort$.next(e)}onPageChange(e){this.page$.next(e)}onReload(){this.reload$.next(!0)}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(S.g),f.Rb(I.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["m-personnel-groups"]],decls:52,vars:34,consts:[[1,"row"],[1,"col-xl-12"],[1,"m-portlet","m-portlet--ngviewer"],[1,"m-portlet__head","compact"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"m-portlet__head-tools"],[1,"m-portlet__nav"],[1,"m-portlet__nav-item"],[1,"pr-2"],["floatLabel","never",2,"width","300px"],["matInput","","placeholder","Type to filter...",3,"value","keyup"],["href","javascript:void(null)","title","Refresh","matTooltip","Click to refresh","matTooltipPosition","above",1,"m-portlet__nav-link","m-portlet__nav-link--icon",3,"click"],[1,"la","la-refresh"],[1,"m-portlet__body","m-portlet__body--no-padding"],[1,"m-portlet__preview","p-0"],["mat-table","","matSort","","matSortDisableClear","",1,"table-hover",3,"dataSource","matSortActive","matSortDirection","matSortChange"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","","class","cell-id",4,"matHeaderCellDef"],["mat-cell","","class","cell-id",3,"deleted",4,"matCellDef"],["mat-header-cell","","mat-sort-header","","class","cell-long-name",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","f-w-500",4,"matCellDef"],["mat-header-cell","","mat-sort-header","","class","cell-number",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header","","class","cell-checkbox",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header","","class","cell-datetime",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"dimmed","deleted",4,"matRowDef","matRowDefColumns"],["class","card card-body blank p-0 table-row",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","pageIndex","page"],["mat-header-cell","","mat-sort-header","",1,"cell-id"],["mat-cell","",1,"cell-id"],[1,"poppins","f-w-400"],["mat-header-cell","","mat-sort-header","",1,"cell-long-name"],["mat-cell",""],["matTooltip","Click to manage","matTooltipPosition","above",3,"routerLink"],["class","v-a-middle ml-05 gold","matTooltip","Super\xa0Administrator group: no restrictions applied ever","matTooltipPosition","above",3,"inline",4,"ngIf"],["matTooltip","Super\xa0Administrator group: no restrictions applied ever","matTooltipPosition","above",1,"v-a-middle","ml-05","gold",3,"inline"],["mat-header-cell",""],["mat-cell","",1,"f-w-500"],[4,"ngIf"],[1,"dimmed"],["class","followed-by-comma",4,"ngFor","ngForOf"],[1,"followed-by-comma"],[1,"v-a-middle","metal",3,"inline"],[1,"v-a-middle"],["mat-header-cell","","mat-sort-header","",1,"cell-number"],["mat-header-cell","","mat-sort-header","",1,"cell-checkbox"],["mat-header-cell","","mat-sort-header","",1,"cell-datetime"],["mat-header-row",""],["mat-row",""],[1,"card","card-body","blank","p-0","table-row"],[1,"inner-text","f-s-14","f-w-400"]],template:function(e,t){if(1&e&&(f.Xb(0,"div",0),f.Xb(1,"div",1),f.Xb(2,"div",2),f.Xb(3,"div",3),f.Xb(4,"div",4),f.Xb(5,"div",5),f.Sb(6,"h3",6),f.Wb(),f.Wb(),f.Xb(7,"div",7),f.Xb(8,"ul",8),f.Xb(9,"li",9),f.Xb(10,"div",10),f.Xb(11,"mat-form-field",11),f.Xb(12,"input",12),f.fc("keyup",(function(e){return t.onNeedleChange(e.target.value)})),f.kc(13,"async"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(14,"li",9),f.Xb(15,"a",13),f.fc("click",(function(){return t.onReload()})),f.Sb(16,"i",14),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(17,"div",15),f.Xb(18,"div",16),f.Xb(19,"table",17),f.fc("matSortChange",(function(e){return t.onSortChange(e)})),f.kc(20,"async"),f.kc(21,"async"),f.kc(22,"async"),f.Vb(23,18),f.Lc(24,Qe,2,0,"th",19),f.Lc(25,et,3,3,"td",20),f.Ub(),f.Vb(26,18),f.Lc(27,tt,2,0,"th",21),f.Lc(28,it,5,3,"td",22),f.Ub(),f.Vb(29,18),f.Lc(30,nt,2,0,"th",23),f.Lc(31,bt,4,3,"td",24),f.Ub(),f.Vb(32,18),f.Lc(33,dt,2,0,"th",25),f.Lc(34,mt,2,1,"td",22),f.Ub(),f.Vb(35,18),f.Lc(36,ut,2,0,"th",26),f.Lc(37,pt,2,1,"td",22),f.Ub(),f.Vb(38,18),f.Lc(39,ht,2,0,"th",27),f.Lc(40,ft,3,4,"td",22),f.Ub(),f.Vb(41,18),f.Lc(42,gt,2,0,"th",27),f.Lc(43,vt,3,4,"td",22),f.Ub(),f.Lc(44,Dt,1,0,"tr",28),f.Lc(45,yt,2,6,"tr",29),f.Wb(),f.Lc(46,Xt,5,7,"div",30),f.kc(47,"async"),f.Xb(48,"mat-paginator",31),f.fc("page",(function(e){return t.onPageChange(e)})),f.kc(49,"async"),f.kc(50,"async"),f.kc(51,"async"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){var a;const e=0===(null==(a=f.lc(47,26,t.dataSource$))?null:null==a.data?null:a.data.length);f.Db(12),f.pc("value",f.lc(13,18,t.needle$)),f.Db(7),f.pc("dataSource",f.lc(20,20,t.dataSource$))("matSortActive",f.lc(21,22,t.sort$).active)("matSortDirection",f.lc(22,24,t.sort$).direction),f.Db(4),f.pc("matColumnDef",t.column.Id),f.Db(3),f.pc("matColumnDef",t.column.Name),f.Db(3),f.pc("matColumnDef",t.column.Members),f.Db(3),f.pc("matColumnDef",t.column.MemberCount),f.Db(3),f.pc("matColumnDef",t.column.IsDeleted),f.Db(3),f.pc("matColumnDef",t.column.CreatedAt),f.Db(3),f.pc("matColumnDef",t.column.UpdatedAt),f.Db(3),f.pc("matHeaderRowDef",t.displayedColumns),f.Db(1),f.pc("matRowDefColumns",t.displayedColumns),f.Db(1),f.pc("ngIf",e),f.Db(2),f.pc("length",f.lc(49,28,t.total$))("pageSize",f.lc(50,30,t.page$).pageSize)("pageSizeOptions",t.pageSizes)("pageIndex",f.lc(51,32,t.page$).pageIndex)}},directives:[M.a,r.b,p.a,u.j,m.a,u.c,u.e,u.b,u.g,u.i,i.m,d.a,u.d,m.b,u.a,S.h,l.a,i.l,u.f,u.h],pipes:[i.b,i.e],styles:[""],changeDetection:0}),e})();function St(e,t){if(1&e&&(f.Xb(0,"div",38),f.Xb(1,"div",39),f.Sb(2,"m-alert",40),f.kc(3,"async"),f.kc(4,"async"),f.kc(5,"async"),f.Wb(),f.Wb()),2&e){const e=f.jc();var a;const t=null==(a=f.lc(3,3,e.alert$))?null:a.message;var i;const c=null==(i=f.lc(4,5,e.alert$))?null:i.kind;var n;const o=null==(n=f.lc(5,7,e.alert$))?null:n.dismissable;f.Db(2),f.pc("message",t)("kind",c)("dismissible",o)}}function kt(e,t){1&e&&(f.Xb(0,"th",41),f.Nc(1," Project ID "),f.Wb())}function _t(e,t){if(1&e&&(f.Xb(0,"td",42),f.Xb(1,"strong"),f.Nc(2),f.Wb(),f.Wb()),2&e){const e=t.$implicit;f.Db(2),f.Oc(e.projectId)}}function jt(e,t){1&e&&(f.Xb(0,"th",43),f.Nc(1," Project Title "),f.Wb())}function Rt(e,t){if(1&e&&(f.Xb(0,"td",44),f.Xb(1,"strong"),f.Nc(2),f.Wb(),f.Wb()),2&e){const e=t.$implicit;f.Db(2),f.Oc(e.projectTitle)}}function Nt(e,t){1&e&&(f.Xb(0,"th",45),f.Xb(1,"span",46),f.Nc(2," Group Role "),f.Sb(3,"i",47),f.Wb(),f.Wb())}const Lt=function(e){return{role:e}};function Ot(e,t){if(1&e&&(f.Xb(0,"td",44),f.Xb(1,"div",48),f.Xb(2,"a",49),f.Xb(3,"strong"),f.Nc(4),f.Wb(),f.Wb(),f.Xb(5,"mat-icon",50),f.Nc(6,"keyboard_arrow_down"),f.Wb(),f.Wb(),f.Wb()),2&e){const e=t.$implicit,a=f.jc(),i=f.yc(66);f.Db(1),f.pc("matMenuTriggerFor",i)("matMenuTriggerData",f.uc(4,Lt,e)),f.Db(3),f.Oc(a.roleName(e.groupRole)||"None"),f.Db(1),f.pc("inline",!0)}}function xt(e,t){1&e&&(f.Xb(0,"th",51),f.Nc(1," Databases "),f.Wb())}function Pt(e,t){1&e&&(f.Xb(0,"span",56),f.Nc(1,"None"),f.Wb())}function It(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",61),f.Xb(1,"mat-checkbox",62),f.fc("change",(function(a){f.Cc(e);const i=t.$implicit,n=f.jc(3).$implicit;return f.jc().onDbChange(n,i,a.checked)})),f.Xb(2,"span",63),f.Nc(3),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=t.$implicit,a=f.jc(3).$implicit;f.Db(1),f.pc("checked",-1!==a.dbs.indexOf(e)),f.Db(2),f.Pc(" ",e," ")}}function At(e,t){if(1&e&&(f.Vb(0),f.Lc(1,It,4,2,"div",60),f.Ub()),2&e){const e=f.jc(2).$implicit;f.Db(1),f.pc("ngForOf",e.projectDbs)}}function Tt(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div"),f.Xb(1,"mat-checkbox",57),f.fc("change",(function(t){f.Cc(e);const a=f.jc().$implicit;return f.jc().onGlobalDbsChange(a,t.checked)})),f.Xb(2,"strong",58),f.Nc(3,"All"),f.Wb(),f.Wb(),f.Lc(4,At,2,1,"ng-container",59),f.Wb()}if(2&e){const e=f.jc().$implicit;f.Hb("mt-1",!e.isGlobal)("mb-1",!e.isGlobal),f.Db(1),f.pc("checked",e.isGlobal),f.Db(3),f.pc("ngIf",!e.isGlobal)}}function Mt(e,t){1&e&&(f.Xb(0,"div",64),f.Xb(1,"mat-icon",65),f.Nc(2,"done_all"),f.Wb(),f.Xb(3,"strong",66),f.Nc(4,"All"),f.Wb(),f.Wb())}function Ut(e,t){if(1&e&&(f.Xb(0,"td",52),f.Lc(1,Pt,2,0,"span",53),f.Lc(2,Tt,5,6,"div",54),f.Lc(3,Mt,5,0,"div",55),f.Wb()),2&e){const e=t.$implicit,a=f.jc();f.pc("ngSwitch",e.groupRole),f.Db(1),f.pc("ngSwitchCase",null),f.Db(1),f.pc("ngSwitchCase",a.accessRole.Consumer)}}function zt(e,t){1&e&&f.Sb(0,"tr",67)}function Gt(e,t){if(1&e&&(f.Xb(0,"tr",68),f.kc(1,"async"),f.Wb()),2&e){const e=t.$implicit,a=f.jc();f.Hb("dimmed",f.lc(1,4,a.loading$))("deleted",e.isDeleted)}}function Ht(e,t){if(1&e&&(f.Xb(0,"div",69),f.Xb(1,"div",70),f.kc(2,"async"),f.Nc(3),f.kc(4,"async"),f.Wb(),f.Wb()),2&e){const e=f.jc();f.Db(1),f.Hb("dimmed",!f.lc(2,3,e.loading$)),f.Db(2),f.Pc(" ",f.lc(4,5,e.loading$)?"Loading data from server...":"No data to display"," ")}}function Vt(e,t){1&e&&(f.Xb(0,"ul",71),f.Xb(1,"li",72),f.Nc(2," Group does not have any members "),f.Wb(),f.Wb())}function Bt(e,t){1&e&&(f.Xb(0,"li",72),f.Nc(1," No users match search criteria "),f.Wb())}function Ft(e,t){if(1&e&&(f.Vb(0),f.Xb(1,"li",72),f.Xb(2,"mat-icon",75),f.Nc(3,"person"),f.Wb(),f.Xb(4,"a",76),f.Xb(5,"span",66),f.Nc(6),f.Wb(),f.Wb(),f.Wb(),f.Ub()),2&e){const e=t.$implicit;f.Db(2),f.pc("inline",!0),f.Db(2),f.rc("routerLink","/personnel/accounts/",e,""),f.Db(2),f.Oc(e)}}function Jt(e,t){if(1&e&&(f.Xb(0,"ul",71),f.Lc(1,Bt,2,0,"li",73),f.kc(2,"async"),f.Lc(3,Ft,7,3,"ng-container",74),f.kc(4,"async"),f.Wb()),2&e){const e=f.jc();var a;const t=0===(null==(a=f.lc(2,2,e.filteredMembers$))?null:a.length);f.Db(1),f.pc("ngIf",t),f.Db(2),f.pc("ngForOf",f.lc(4,4,e.filteredMembers$))}}function Yt(e,t){if(1&e){const e=f.Yb();f.Xb(0,"button",77),f.fc("click",(function(){f.Cc(e);const a=t.role;return f.jc().onRoleReset(a)})),f.Nc(1," None "),f.Wb(),f.Xb(2,"button",77),f.fc("click",(function(){f.Cc(e);const a=t.role,i=f.jc();return i.onRoleChange(a,i.accessRole.Consumer)})),f.Nc(3),f.Wb(),f.Xb(4,"button",77),f.fc("click",(function(){f.Cc(e);const a=t.role,i=f.jc();return i.onRoleChange(a,i.accessRole.Maintainer)})),f.Nc(5),f.Wb(),f.Xb(6,"button",77),f.fc("click",(function(){f.Cc(e);const a=t.role,i=f.jc();return i.onRoleChange(a,i.accessRole.Admin)})),f.Nc(7),f.Wb()}if(2&e){const e=t.role,a=f.jc();f.pc("disabled",!e.groupRole),f.Db(2),f.pc("disabled",e.groupRole===a.accessRole.Consumer),f.Db(1),f.Pc(" ",a.roleName(a.accessRole.Consumer)," "),f.Db(1),f.pc("disabled",e.groupRole===a.accessRole.Maintainer),f.Db(1),f.Pc(" ",a.roleName(a.accessRole.Maintainer)," "),f.Db(1),f.pc("disabled",e.groupRole===a.accessRole.Admin),f.Db(1),f.Pc(" ",a.roleName(a.accessRole.Admin)," ")}}var qt=function(e){return e.ProjectId="project_id",e.ProjectTitle="project_title",e.GroupRole="group_role",e.ProjectDbs="project_dbs",e}({});const Et=qt.ProjectId,Kt=[qt.ProjectId,qt.ProjectTitle,qt.GroupRole,qt.ProjectDbs],Zt=[{path:"",children:[{path:"accounts",component:re},{path:"accounts/:username",component:Ze},{path:"groups",component:wt},{path:"groups/:name",component:(()=>{class e{constructor(e,t,a,i,n,c,o){this.activatedRoute=e,this.router=t,this.cdr=a,this.clipboardService=i,this.subheaderService=n,this.palladiumAdminService=c,this.notificationService=o,this.destroy$=new g.a,this.loading$=new k.a(!1),this.group$=new k.a(null),this.filteredMembers$=new k.a([]),this.alert$=new k.a(null),this.reload$=new k.a(!0),this.needle$=new k.a(""),this.memberNeedle$=new k.a(""),this.sort$=new k.a({active:Et,direction:"asc"}),this.page$=new k.a({pageIndex:0,pageSize:10}),this.total$=new k.a(0),this.dataSource$=new k.a(new u.k),this.displayedColumns=[...Kt],this.column=qt,this.accessRole=T.a,this.pageSizes=[10,25,50,100],Object(_.a)(this.activatedRoute.paramMap.pipe(Object(L.a)(e=>e.get("name")),Object(R.a)(),Object(be.a)(e=>this.palladiumAdminService.getPersonnelGroupByName(e)),Object(x.a)(e=>this.onGroupChange(e))),this.reload$.asObservable(),this.needle$.asObservable().pipe(Object(R.a)(),Object(N.a)(450)),this.sort$.asObservable(),this.page$.asObservable()).pipe(Object(v.a)(this.destroy$),Object(L.a)(([e,t,a,i,n])=>({groupId:e.id,needle:a,orderBy:T.q.fromJson(i.active||Et),orderDir:A.e.fromJson(i.direction||"asc"),limit:n.pageSize,offset:n.pageIndex*n.pageSize})),Object(O.a)(e=>{const t=!(this.args&&this.args.groupId===e.groupId&&this.args.needle===e.needle&&this.args.orderBy===e.orderBy&&this.args.orderDir===e.orderDir&&this.args.limit===e.limit);return this.args=e,t&&this.page$.next({pageSize:e.limit,pageIndex:0}),!t})).subscribe(e=>this.loadItems(e)),Object(_.a)(this.group$.asObservable().pipe(Object(O.a)(e=>e instanceof T.n)),this.memberNeedle$.asObservable().pipe(Object(N.a)(50))).pipe(Object(v.a)(this.destroy$)).subscribe(([e,t])=>{const a=(t||"").trim().toLocaleLowerCase(),i=e.members.filter(e=>!a||-1!==e.toLocaleLowerCase().indexOf(a)).sort((e,t)=>e<t?-1:1);this.filteredMembers$.next(i)})}ngOnDestroy(){this.subData instanceof j.a&&(this.subData.unsubscribe(),this.subData=null),this.destroy$.next(),this.destroy$.complete(),this.loading$.complete()}getData(e){return this.palladiumAdminService.getPersonnelGroupRoles(e.groupId,e.needle,e.orderBy,e.orderDir,e.offset,e.limit).pipe(Object(v.a)(this.destroy$),Object(x.a)(e=>this.total$.next(e.total)),Object(L.a)(e=>e.items))}loadItems(e){this.loading$.next(!0),this.subData instanceof j.a&&(this.subData.unsubscribe(),this.subData=null),this.subData=this.getData(e).pipe(Object(v.a)(this.destroy$),Object(P.a)(()=>this.loading$.next(!1))).subscribe(e=>{const t=new u.k;t.data=e,this.dataSource$.next(t)})}roleName(e){const t="string"==typeof e?T.a.fromJson(e):e;return T.a.getDescription(t)}updatePageStatus(e){this.subheaderService.setTitle(e.name),this.subheaderService.setBreadcrumbs([{title:"Personnel Groups",page:"/personnel/groups"},{title:e.name,page:`/personnel/groups/${e.name}`}]),this.alert$.next(null),this.cdr.detectChanges()}onNeedleChange(e){this.needle$.next((e||"").trim())}onMemberNeedleChange(e){this.memberNeedle$.next((e||"").trim())}onSortChange(e){this.sort$.next(e)}onPageChange(e){this.page$.next(e)}onReload(){this.reload$.next(!0)}onGroupChange(e){this.group$.next(e),this.updatePageStatus(e)}onRoleChange(e,t){e.groupRole!==t&&this.setPersonnelGroupRole(e.groupId,e.projectId,t).subscribe(e=>{this.reload$.next(!0),this.notificationService.success("Role changed")})}onRoleReset(e){e.groupRole&&this.resetPersonnelGroupRole(e.groupId,e.projectId).subscribe(e=>{this.reload$.next(!0),this.notificationService.success("Role changed")})}onGlobalDbsChange(e,t){this.setPersonnelGroupRole(e.groupId,e.projectId,e.groupRole,t,[]).subscribe(e=>{this.reload$.next(!0),this.notificationService.success("Database access updated")})}onDbChange(e,t,a){const i=e.dbs.indexOf(t);let n=[];a&&-1===i?n=[...e.dbs,t]:a||-1===i||(n=e.dbs.filter(e=>e!==t)),this.setPersonnelGroupRole(e.groupId,e.projectId,e.groupRole,!1,n).subscribe(e=>{this.reload$.next(!0),this.notificationService.success("Database access updated")})}setPersonnelGroupRole(e,t,a,i=null,n=null){const c=new T.b;return"boolean"==typeof i&&(c.isGlobal=i),n instanceof Array&&(c.dbs=n),c.role=a,this.palladiumAdminService.setPersonnelGroupRole(c,e,t).pipe(Object(v.a)(this.destroy$))}resetPersonnelGroupRole(e,t){return this.palladiumAdminService.resetPersonnelGroupRole(e,t).pipe(Object(v.a)(this.destroy$))}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(S.a),f.Rb(S.g),f.Rb(f.h),f.Rb(me.a),f.Rb(de.a),f.Rb(I.a),f.Rb(ue.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["m-personnel-group-manage"]],decls:68,vars:41,consts:[["class","row mb-2",4,"ngIf"],[1,"row"],[1,"col-xl-9"],[1,"m-portlet","m-portlet--ngviewer"],[1,"m-portlet__head","compact"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-text"],[1,"m-portlet__head-tools"],[1,"m-portlet__nav"],[1,"m-portlet__nav-item"],[1,"pr-2"],["floatLabel","never",2,"width","300px"],["matInput","","placeholder","Type to filter...",3,"value","keyup"],["href","javascript:void(null)","title","Refresh","matTooltip","Click to refresh","matTooltipPosition","above",1,"m-portlet__nav-link","m-portlet__nav-link--icon",3,"click"],[1,"la","la-refresh"],[1,"m-portlet__body","m-portlet__body--no-padding"],[1,"m-portlet__preview","p-0"],["mat-table","","matSort","","matSortDisableClear","",1,"table-hover",3,"dataSource","matSortActive","matSortDirection","matSortChange"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","","class","cell-uid",4,"matHeaderCellDef"],["mat-cell","","class","cell-uid",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","","class","cell-role",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header","","class","cell-role-long",4,"matHeaderCellDef"],["mat-cell","",3,"ngSwitch",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"dimmed","deleted",4,"matRowDef","matRowDefColumns"],["class","card card-body blank p-0 table-row",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","pageIndex","page"],[1,"col-xl-3"],["floatLabel","never",2,"width","125px"],[1,"m-portlet__preview","p-0",3,"ngSwitch"],["class","members",4,"ngSwitchCase"],["class","members",4,"ngSwitchDefault"],["roleMenu","matMenu"],["matMenuContent",""],[1,"row","mb-2"],[1,"col-lg-12","mb-2","f-s-14"],[3,"message","kind","dismissible"],["mat-header-cell","","mat-sort-header","",1,"cell-uid"],["mat-cell","",1,"cell-uid"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"cell-role"],["matTooltip","Access role assigned to current group explicitly","matTooltipPosition","above"],[1,"la","la-question-circle","hint-icon","dimmed"],[1,"clickable",3,"matMenuTriggerFor","matMenuTriggerData"],["href","javascript:void(null)","matTooltip","Click to change","matTooltipPosition","above"],[1,"metal","v-a-middle",3,"inline"],["mat-header-cell","","mat-sort-header","",1,"cell-role-long"],["mat-cell","",3,"ngSwitch"],["class","dimmed",4,"ngSwitchCase"],[3,"mt-1","mb-1",4,"ngSwitchCase"],["matTooltip","All current and future databases","matTooltipPosition","above",4,"ngSwitchDefault"],[1,"dimmed"],["color","primary","matTooltip","All current and future databases","matTooltipPosition","above",3,"checked","change"],[1,"f-w-600","v-a-middle","checkbox-label"],[4,"ngIf"],["class","block group-role",4,"ngFor","ngForOf"],[1,"block","group-role"],["color","primary",3,"checked","change"],[1,"f-w-400","v-a-middle","checkbox-label"],["matTooltip","All current and future databases","matTooltipPosition","above"],[1,"v-a-middle","blue","f-s-21"],[1,"f-w-600"],["mat-header-row",""],["mat-row",""],[1,"card","card-body","blank","p-0","table-row"],[1,"inner-text","f-s-14","f-w-400"],[1,"members"],[1,"member"],["class","member",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"v-a-middle","metal",3,"inline"],["matTooltip","Click to manage","matTooltipPosition","above",3,"routerLink"],["mat-menu-item","",3,"disabled","click"]],template:function(e,t){if(1&e&&(f.Lc(0,St,6,9,"div",0),f.kc(1,"async"),f.Xb(2,"div",1),f.Xb(3,"div",2),f.Xb(4,"div",3),f.Xb(5,"div",4),f.Xb(6,"div",5),f.Xb(7,"div",6),f.Xb(8,"h3",7),f.Nc(9," Group access roles "),f.Wb(),f.Wb(),f.Wb(),f.Xb(10,"div",8),f.Xb(11,"ul",9),f.Xb(12,"li",10),f.Xb(13,"div",11),f.Xb(14,"mat-form-field",12),f.Xb(15,"input",13),f.fc("keyup",(function(e){return t.onNeedleChange(e.target.value)})),f.kc(16,"async"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(17,"li",10),f.Xb(18,"a",14),f.fc("click",(function(){return t.onReload()})),f.Sb(19,"i",15),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(20,"div",16),f.Xb(21,"div",17),f.Xb(22,"table",18),f.fc("matSortChange",(function(e){return t.onSortChange(e)})),f.kc(23,"async"),f.kc(24,"async"),f.kc(25,"async"),f.Vb(26,19),f.Lc(27,kt,2,0,"th",20),f.Lc(28,_t,3,1,"td",21),f.Ub(),f.Vb(29,19),f.Lc(30,jt,2,0,"th",22),f.Lc(31,Rt,3,1,"td",23),f.Ub(),f.Vb(32,19),f.Lc(33,Nt,4,0,"th",24),f.Lc(34,Ot,7,6,"td",23),f.Ub(),f.Vb(35,19),f.Lc(36,xt,2,0,"th",25),f.Lc(37,Ut,4,3,"td",26),f.Ub(),f.Lc(38,zt,1,0,"tr",27),f.Lc(39,Gt,2,6,"tr",28),f.Wb(),f.Lc(40,Ht,5,7,"div",29),f.kc(41,"async"),f.Xb(42,"mat-paginator",30),f.fc("page",(function(e){return t.onPageChange(e)})),f.kc(43,"async"),f.kc(44,"async"),f.kc(45,"async"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(46,"div",31),f.Xb(47,"div",3),f.Xb(48,"div",4),f.Xb(49,"div",5),f.Xb(50,"div",6),f.Xb(51,"h3",7),f.Nc(52," Group members "),f.Wb(),f.Wb(),f.Wb(),f.Xb(53,"div",8),f.Xb(54,"ul",9),f.Xb(55,"li",10),f.Xb(56,"div",11),f.Xb(57,"mat-form-field",32),f.Xb(58,"input",13),f.fc("keyup",(function(e){return t.onMemberNeedleChange(e.target.value)})),f.kc(59,"async"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(60,"div",16),f.Xb(61,"div",33),f.kc(62,"async"),f.Lc(63,Vt,3,0,"ul",34),f.Lc(64,Jt,5,6,"ul",35),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(65,"mat-menu",null,36),f.Lc(67,Yt,8,7,"ng-template",37),f.Wb()),2&e){var a;const e=0===(null==(a=f.lc(41,29,t.dataSource$))?null:null==a.data?null:a.data.length);var i;const n=null==(i=f.lc(62,39,t.group$))?null:i.memberCount;f.pc("ngIf",f.lc(1,19,t.alert$)),f.Db(15),f.pc("value",f.lc(16,21,t.needle$)),f.Db(7),f.pc("dataSource",f.lc(23,23,t.dataSource$))("matSortActive",f.lc(24,25,t.sort$).active)("matSortDirection",f.lc(25,27,t.sort$).direction),f.Db(4),f.pc("matColumnDef",t.column.ProjectId),f.Db(3),f.pc("matColumnDef",t.column.ProjectTitle),f.Db(3),f.pc("matColumnDef",t.column.GroupRole),f.Db(3),f.pc("matColumnDef",t.column.ProjectDbs),f.Db(3),f.pc("matHeaderRowDef",t.displayedColumns),f.Db(1),f.pc("matRowDefColumns",t.displayedColumns),f.Db(1),f.pc("ngIf",e),f.Db(2),f.pc("length",f.lc(43,31,t.total$))("pageSize",f.lc(44,33,t.page$).pageSize)("pageSizeOptions",t.pageSizes)("pageIndex",f.lc(45,35,t.page$).pageIndex),f.Db(16),f.pc("value",f.lc(59,37,t.memberNeedle$)),f.Db(3),f.pc("ngSwitch",n),f.Db(2),f.pc("ngSwitchCase",0)}},directives:[i.m,M.a,r.b,p.a,u.j,m.a,u.c,u.e,u.b,u.g,u.i,d.a,i.o,i.p,i.q,b.e,b.a,ge,u.d,m.b,u.a,b.d,l.a,o.a,i.l,u.f,u.h,S.h,b.b],pipes:[i.b],styles:[".group-role[_ngcontent-%COMP%]{line-height:20px}ul.members[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;-webkit-padding-start:0;padding-inline-start:0}li.member[_ngcontent-%COMP%]{list-style-type:none;padding:0 15px;font-weight:400;font-family:Roboto,Helvetica Neue,sans-serif}.checkbox-label[_ngcontent-%COMP%]{line-height:23px}"],changeDetection:0}),e})()},{path:"*",redirectTo:"accounts"}]}];let Qt=(()=>{class e{}return e.\u0275mod=f.Pb({type:e}),e.\u0275inj=f.Ob({factory:function(t){return new(t||e)},imports:[[S.i.forChild(Zt)],S.i]}),e})();a.d(t,"PersonnelModule",(function(){return ea}));let ea=(()=>{class e{}return e.\u0275mod=f.Pb({type:e}),e.\u0275inj=f.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,n.f,c.b,o.b,s.a,l.b,r.c,b.c,d.b,m.c,u.l,p.b,h.c,$,C.a,w.a,Qt]]}),e})()},kScs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return e.hashStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendStr(e).end(t)},e.hashAsciiStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendAsciiStr(e).end(t)},e._hex=function(t){var a,i,n,c,o=e.hexChars,s=e.hexOut;for(c=0;c<4;c+=1)for(i=8*c,a=t[c],n=0;n<8;n+=2)s[i+1+n]=o.charAt(15&a),s[i+0+n]=o.charAt(15&(a>>>=4)),a>>>=4;return s.join("")},e._md5cycle=function(e,t){var a=e[0],i=e[1],n=e[2],c=e[3];i=((i+=((n=((n+=((c=((c+=((a=((a+=(i&n|~i&c)+t[0]-680876936|0)<<7|a>>>25)+i|0)&i|~a&n)+t[1]-389564586|0)<<12|c>>>20)+a|0)&a|~c&i)+t[2]+606105819|0)<<17|n>>>15)+c|0)&c|~n&a)+t[3]-1044525330|0)<<22|i>>>10)+n|0,i=((i+=((n=((n+=((c=((c+=((a=((a+=(i&n|~i&c)+t[4]-176418897|0)<<7|a>>>25)+i|0)&i|~a&n)+t[5]+1200080426|0)<<12|c>>>20)+a|0)&a|~c&i)+t[6]-1473231341|0)<<17|n>>>15)+c|0)&c|~n&a)+t[7]-45705983|0)<<22|i>>>10)+n|0,i=((i+=((n=((n+=((c=((c+=((a=((a+=(i&n|~i&c)+t[8]+1770035416|0)<<7|a>>>25)+i|0)&i|~a&n)+t[9]-1958414417|0)<<12|c>>>20)+a|0)&a|~c&i)+t[10]-42063|0)<<17|n>>>15)+c|0)&c|~n&a)+t[11]-1990404162|0)<<22|i>>>10)+n|0,i=((i+=((n=((n+=((c=((c+=((a=((a+=(i&n|~i&c)+t[12]+1804603682|0)<<7|a>>>25)+i|0)&i|~a&n)+t[13]-40341101|0)<<12|c>>>20)+a|0)&a|~c&i)+t[14]-1502002290|0)<<17|n>>>15)+c|0)&c|~n&a)+t[15]+1236535329|0)<<22|i>>>10)+n|0,i=((i+=((n=((n+=((c=((c+=((a=((a+=(i&c|n&~c)+t[1]-165796510|0)<<5|a>>>27)+i|0)&n|i&~n)+t[6]-1069501632|0)<<9|c>>>23)+a|0)&i|a&~i)+t[11]+643717713|0)<<14|n>>>18)+c|0)&a|c&~a)+t[0]-373897302|0)<<20|i>>>12)+n|0,i=((i+=((n=((n+=((c=((c+=((a=((a+=(i&c|n&~c)+t[5]-701558691|0)<<5|a>>>27)+i|0)&n|i&~n)+t[10]+38016083|0)<<9|c>>>23)+a|0)&i|a&~i)+t[15]-660478335|0)<<14|n>>>18)+c|0)&a|c&~a)+t[4]-405537848|0)<<20|i>>>12)+n|0,i=((i+=((n=((n+=((c=((c+=((a=((a+=(i&c|n&~c)+t[9]+568446438|0)<<5|a>>>27)+i|0)&n|i&~n)+t[14]-1019803690|0)<<9|c>>>23)+a|0)&i|a&~i)+t[3]-187363961|0)<<14|n>>>18)+c|0)&a|c&~a)+t[8]+1163531501|0)<<20|i>>>12)+n|0,i=((i+=((n=((n+=((c=((c+=((a=((a+=(i&c|n&~c)+t[13]-1444681467|0)<<5|a>>>27)+i|0)&n|i&~n)+t[2]-51403784|0)<<9|c>>>23)+a|0)&i|a&~i)+t[7]+1735328473|0)<<14|n>>>18)+c|0)&a|c&~a)+t[12]-1926607734|0)<<20|i>>>12)+n|0,i=((i+=((n=((n+=((c=((c+=((a=((a+=(i^n^c)+t[5]-378558|0)<<4|a>>>28)+i|0)^i^n)+t[8]-2022574463|0)<<11|c>>>21)+a|0)^a^i)+t[11]+1839030562|0)<<16|n>>>16)+c|0)^c^a)+t[14]-35309556|0)<<23|i>>>9)+n|0,i=((i+=((n=((n+=((c=((c+=((a=((a+=(i^n^c)+t[1]-1530992060|0)<<4|a>>>28)+i|0)^i^n)+t[4]+1272893353|0)<<11|c>>>21)+a|0)^a^i)+t[7]-155497632|0)<<16|n>>>16)+c|0)^c^a)+t[10]-1094730640|0)<<23|i>>>9)+n|0,i=((i+=((n=((n+=((c=((c+=((a=((a+=(i^n^c)+t[13]+681279174|0)<<4|a>>>28)+i|0)^i^n)+t[0]-358537222|0)<<11|c>>>21)+a|0)^a^i)+t[3]-722521979|0)<<16|n>>>16)+c|0)^c^a)+t[6]+76029189|0)<<23|i>>>9)+n|0,i=((i+=((n=((n+=((c=((c+=((a=((a+=(i^n^c)+t[9]-640364487|0)<<4|a>>>28)+i|0)^i^n)+t[12]-421815835|0)<<11|c>>>21)+a|0)^a^i)+t[15]+530742520|0)<<16|n>>>16)+c|0)^c^a)+t[2]-995338651|0)<<23|i>>>9)+n|0,i=((i+=((c=((c+=(i^((a=((a+=(n^(i|~c))+t[0]-198630844|0)<<6|a>>>26)+i|0)|~n))+t[7]+1126891415|0)<<10|c>>>22)+a|0)^((n=((n+=(a^(c|~i))+t[14]-1416354905|0)<<15|n>>>17)+c|0)|~a))+t[5]-57434055|0)<<21|i>>>11)+n|0,i=((i+=((c=((c+=(i^((a=((a+=(n^(i|~c))+t[12]+1700485571|0)<<6|a>>>26)+i|0)|~n))+t[3]-1894986606|0)<<10|c>>>22)+a|0)^((n=((n+=(a^(c|~i))+t[10]-1051523|0)<<15|n>>>17)+c|0)|~a))+t[1]-2054922799|0)<<21|i>>>11)+n|0,i=((i+=((c=((c+=(i^((a=((a+=(n^(i|~c))+t[8]+1873313359|0)<<6|a>>>26)+i|0)|~n))+t[15]-30611744|0)<<10|c>>>22)+a|0)^((n=((n+=(a^(c|~i))+t[6]-1560198380|0)<<15|n>>>17)+c|0)|~a))+t[13]+1309151649|0)<<21|i>>>11)+n|0,i=((i+=((c=((c+=(i^((a=((a+=(n^(i|~c))+t[4]-145523070|0)<<6|a>>>26)+i|0)|~n))+t[11]-1120210379|0)<<10|c>>>22)+a|0)^((n=((n+=(a^(c|~i))+t[2]+718787259|0)<<15|n>>>17)+c|0)|~a))+t[9]-343485551|0)<<21|i>>>11)+n|0,e[0]=a+e[0]|0,e[1]=i+e[1]|0,e[2]=n+e[2]|0,e[3]=c+e[3]|0},e.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this},e.prototype.appendStr=function(t){var a,i,n=this._buffer8,c=this._buffer32,o=this._bufferLength;for(i=0;i<t.length;i+=1){if((a=t.charCodeAt(i))<128)n[o++]=a;else if(a<2048)n[o++]=192+(a>>>6),n[o++]=63&a|128;else if(a<55296||a>56319)n[o++]=224+(a>>>12),n[o++]=a>>>6&63|128,n[o++]=63&a|128;else{if((a=1024*(a-55296)+(t.charCodeAt(++i)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");n[o++]=240+(a>>>18),n[o++]=a>>>12&63|128,n[o++]=a>>>6&63|128,n[o++]=63&a|128}o>=64&&(this._dataLength+=64,e._md5cycle(this._state,c),o-=64,c[0]=c[16])}return this._bufferLength=o,this},e.prototype.appendAsciiStr=function(t){for(var a,i=this._buffer8,n=this._buffer32,c=this._bufferLength,o=0;;){for(a=Math.min(t.length-o,64-c);a--;)i[c++]=t.charCodeAt(o++);if(c<64)break;this._dataLength+=64,e._md5cycle(this._state,n),c=0}return this._bufferLength=c,this},e.prototype.appendByteArray=function(t){for(var a,i=this._buffer8,n=this._buffer32,c=this._bufferLength,o=0;;){for(a=Math.min(t.length-o,64-c);a--;)i[c++]=t[o++];if(c<64)break;this._dataLength+=64,e._md5cycle(this._state,n),c=0}return this._bufferLength=c,this},e.prototype.getState=function(){var e=this._state;return{buffer:String.fromCharCode.apply(null,this._buffer8),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}},e.prototype.setState=function(e){var t,a=e.buffer,i=e.state,n=this._state;for(this._dataLength=e.length,this._bufferLength=e.buflen,n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],t=0;t<a.length;t+=1)this._buffer8[t]=a.charCodeAt(t)},e.prototype.end=function(t){void 0===t&&(t=!1);var a,i=this._bufferLength,n=this._buffer8,c=this._buffer32,o=1+(i>>2);if(this._dataLength+=i,n[i]=128,n[i+1]=n[i+2]=n[i+3]=0,c.set(e.buffer32Identity.subarray(o),o),i>55&&(e._md5cycle(this._state,c),c.set(e.buffer32Identity)),(a=8*this._dataLength)<=4294967295)c[14]=a;else{var s=a.toString(16).match(/(.*?)(.{0,8})$/);if(null===s)return;var l=parseInt(s[2],16),r=parseInt(s[1],16)||0;c[14]=l,c[15]=r}return e._md5cycle(this._state,c),t?this._state:e._hex(this._state)},e.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),e.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e.hexChars="0123456789abcdef",e.hexOut=[],e.onePassHasher=new e,e}();t.Md5=i,"5d41402abc4b2a76b9719d911017c592"!==i.hashStr("hello")&&console.error("Md5 self test failed.")}}]);