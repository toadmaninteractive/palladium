(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"HwM/":function(t,i,e){"use strict";e.r(i);var n=e("ofXK"),s=e("3Pt+"),o=e("tyNb"),r=e("bTqV"),a=e("Wp6s"),l=e("bSwM"),c=e("kmnG"),d=e("NFeN"),b=e("qFsG"),p=e("QibW"),m=e("d3UM"),u=e("Qu3c"),g=e("PCNd"),h=e("XNiG"),f=e("2Vo4"),_=e("1G5W"),S=e("nYR2"),v=e("Y4+Y"),W=e("mi6w"),X=e("Y40W"),y=e("fXoL");let D=(()=>{class t{transform(t,i){if(!("number"==typeof t&&t>0))return"invalid duration";let e=+t;const n=Math.floor(e/86400);e%=86400;const s=Math.floor(e/3600);e%=3600;const o=Math.floor(e/60),r=e%60;let a=n>0?n+" days ":"";return a+=s>0?s+" hours ":"",a+=o>0?o+" mins ":"",a+=r>0?r+" secs ":"",a}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=y.Qb({name:"mPrettyDuration",type:t,pure:!0}),t})();const w=function(t){return{dimmed:t}};function k(t,i){if(1&t){const t=y.Yb();y.Xb(0,"form",15),y.kc(1,"async"),y.Xb(2,"fieldset",16),y.kc(3,"async"),y.Xb(4,"div",17),y.Xb(5,"div",0),y.Xb(6,"div",18),y.Xb(7,"div",19),y.Xb(8,"h3",20),y.Nc(9,"Sessions"),y.Wb(),y.Wb(),y.Xb(10,"div",21),y.Xb(11,"mat-form-field",22),y.Xb(12,"input",23),y.fc("ngModelChange",(function(i){return y.Cc(t),y.jc().settings.personnelSessionDuration=i})),y.Wb(),y.Xb(13,"mat-hint",24),y.Nc(14," Which is "),y.Xb(15,"strong"),y.Nc(16),y.kc(17,"mPrettyDuration"),y.Wb(),y.Wb(),y.Wb(),y.Wb(),y.Wb(),y.Wb(),y.Wb(),y.Xb(18,"div",25),y.Xb(19,"div",26),y.Xb(20,"button",27),y.fc("click",(function(){return y.Cc(t),y.jc().updateSettings()})),y.kc(21,"async"),y.Nc(22," Update settings "),y.Wb(),y.Nc(23,"\xa0 "),y.Wb(),y.Wb(),y.Wb(),y.Wb()}if(2&t){const t=y.jc();y.pc("ngClass",y.uc(14,w,y.lc(1,6,t.loading$))),y.Db(2),y.pc("disabled",y.lc(3,8,t.loading$)),y.Db(10),y.pc("min",0)("ngModel",t.settings.personnelSessionDuration),y.Db(4),y.Oc(y.lc(17,10,t.settings.personnelSessionDuration)),y.Db(4),y.pc("disabled",y.lc(21,12,t.loading$)||!t.settingsChanged()||!t.settingsValid())}}let C=(()=>{class t{constructor(t,i,e,n){this.router=t,this.cdr=i,this.palladiumAdminService=e,this.notificationService=n}ngOnInit(){this.destroy$=new h.a,this.loading$=new f.a(!1),this.getSettings()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.loading$.complete()}isInitialized(){return!(!this.settings||!this.pristineSettings)}settingsChanged(){return!!this.isInitialized()&&+this.settings.personnelSessionDuration!==this.pristineSettings.personnelSessionDuration}settingsValid(){return!!this.isInitialized()&&+this.settings.personnelSessionDuration>0}getSettings(){this.loading$.next(!0),this.palladiumAdminService.getSettings().pipe(Object(_.a)(this.destroy$),Object(S.a)(()=>this.loading$.next(!1))).subscribe(t=>{this.settings=t,this.pristineSettings=X.w.fromJson(t.toJson()),this.cdr.detectChanges()})}updateSettings(){if(!this.isInitialized())return;const t=new X.x;t.personnelSessionDuration=+this.settings.personnelSessionDuration!==this.pristineSettings.personnelSessionDuration?this.settings.personnelSessionDuration:null,this.loading$.next(!0),this.palladiumAdminService.updateSettings(t).pipe(Object(_.a)(this.destroy$),Object(S.a)(()=>this.loading$.next(!1))).subscribe(t=>{t.result?this.notificationService.success("Settings updated"):this.notificationService.error("Settings not updated"),t.result&&(this.cdr.detectChanges(),this.getSettings())})}}return t.\u0275fac=function(i){return new(i||t)(y.Rb(o.g),y.Rb(y.h),y.Rb(W.a),y.Rb(v.a))},t.\u0275cmp=y.Lb({type:t,selectors:[["m-settings"]],decls:16,vars:1,consts:[[1,"row"],[1,"col-lg-12"],[1,"m-portlet"],[1,"m-portlet__head"],[1,"m-portlet__head-caption"],[1,"m-portlet__head-title"],[1,"m-portlet__head-icon"],[1,"la","la-gear"],[1,"m-portlet__head-text"],[1,"m-portlet__head-tools"],[1,"m-portlet__nav"],[1,"m-portlet__nav-item"],["href","javascript:void(null);","title","Refresh","matTooltip","Click to refresh","matTooltipPosition","above",1,"m-portlet__nav-link","m-portlet__nav-link--icon",3,"click"],[1,"la","la-refresh"],["class","m-form m-form--fit",3,"ngClass",4,"ngIf"],[1,"m-form","m-form--fit",3,"ngClass"],[3,"disabled"],[1,"m-portlet__body"],[1,"col-md-6","col-sm-12","col-xs-12"],[1,"m-form__heading"],[1,"m-form__heading-title"],[1,"form-group","m-form__group"],[1,"example-full-width"],["type","number","required","","matInput","","name","personnelSessionDuration","placeholder","Personnel session duration",3,"min","ngModel","ngModelChange"],["align","start",1,"f-s-12","pt-1"],[1,"m-portlet__foot","m-portlet__no-border","m-portlet__foot--fit","m--align-right"],[1,"m-form__actions","m-form__actions--solid"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,i){1&t&&(y.Xb(0,"div",0),y.Xb(1,"div",1),y.Xb(2,"div",2),y.Xb(3,"div",3),y.Xb(4,"div",4),y.Xb(5,"div",5),y.Xb(6,"span",6),y.Sb(7,"i",7),y.Wb(),y.Xb(8,"h3",8),y.Nc(9," Manage system settings "),y.Wb(),y.Wb(),y.Wb(),y.Xb(10,"div",9),y.Xb(11,"ul",10),y.Xb(12,"li",11),y.Xb(13,"a",12),y.fc("click",(function(){return i.getSettings()})),y.Sb(14,"i",13),y.Wb(),y.Wb(),y.Wb(),y.Wb(),y.Wb(),y.Lc(15,k,24,16,"form",14),y.Wb(),y.Wb(),y.Wb()),2&t&&(y.Db(15),y.pc("ngIf",i.isInitialized()))},directives:[u.a,n.m,s.r,s.k,s.l,n.k,c.a,s.n,b.b,s.b,s.p,s.j,s.m,c.d,r.a],pipes:[n.b,D],styles:[""],changeDetection:0}),t})();e.d(i,"SettingsModule",(function(){return $}));let $=(()=>{class t{}return t.\u0275mod=y.Pb({type:t}),t.\u0275inj=y.Ob({factory:function(i){return new(i||t)},providers:[],imports:[[n.c,s.f,r.b,a.d,l.b,c.c,d.b,b.c,p.a,m.b,u.b,g.a,o.i.forChild([{path:"",component:C}])]]}),t})()}}]);